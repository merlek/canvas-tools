!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("canvas-tools",[],e):"object"==typeof exports?exports["canvas-tools"]=e():t["canvas-tools"]=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=this;void 0===e&&(e=30),this.canvas=t,this.fps=e,this.update=function(t){return function(e){e-t>1e3/n.fps?(n.draw(),n.animationFrameId=window.requestAnimationFrame(n.update(e))):n.animationFrameId=window.requestAnimationFrame(n.update(t))}},this.ctx=t.getContext("2d"),setTimeout((function(){n.setup(),window.requestAnimationFrame(n.update(0))}),0)}return t.prototype.clear=function(t){void 0===t&&(t=this.ctx),t.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.destroy=function(){this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId)},t}();e.CanvasAnimator=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.draw=function(t,e){var n=e.x,o=e.y,r=e.width,i=e.height,a=e.radius,u=e.fillStyle,s=e.strokeStyle;"number"==typeof a&&(a={tl:a,tr:a,br:a,bl:a}),t.save(),t.beginPath(),t.moveTo(n+a.tl,o),t.lineTo(n+r-a.tr,o),t.quadraticCurveTo(n+r,o,n+r,o+a.tr),t.lineTo(n+r,o+i-a.br),t.quadraticCurveTo(n+r,o+i,n+r-a.br,o+i),t.lineTo(n+a.bl,o+i),t.quadraticCurveTo(n,o+i,n,o+i-a.bl),t.lineTo(n,o+a.tl),t.quadraticCurveTo(n,o,n+a.tl,o),t.closePath(),u&&(t.fillStyle=u,t.fill()),s&&(t.strokeStyle=s,t.stroke()),t.restore()},t}();e.RoundedRect=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.FONT_FAMILY='Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',t.draw=function(e,n){var o=n.text,r=n.x,i=n.y,a=n.maxWidth,u=n.font,s=n.fillStyle,c=n.strokeStyle,l=n.textAlign,f=void 0===l?"center":l,d=n.textBaseline,v=void 0===d?"middle":d;e.save(),"number"==typeof u&&(u=t.getFont(u)),e.font=u,e.textAlign=f,e.textBaseline=v,s||c||(s="black"),s&&(e.fillStyle=s,e.fillText(o,r,i,a)),c&&(e.strokeStyle=c,e.strokeText(o,r,i,a)),e.restore()},t.getFont=function(e){return e+"px "+t.FONT_FAMILY},t}();e.Text=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.contains=function(t,e){return t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y},t.intersects=function(t,e){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+t.height||t.y+t.height<e.y)},t}();e.Rect=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5);e.Animators=o;var r=n(8);e.ImageLoader=r.ImageLoader,function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(9))},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(6)),o(n(0)),o(n(7)),e.createCanvasElement=function(t,e,n){var o,r;void 0===e&&(e=600),void 0===n&&(n=600);var i=document.createElement("canvas");i.width=e,i.height=n,i.style.cssText="width: 100%;";var a=document.getElementById(t);return(null===(o=a)||void 0===o?void 0:o.innerHTML)&&(a.innerHTML=""),null===(r=a)||void 0===r||r.append(i),i}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){void 0===n&&(n="#232323");var o=t.call(this,e)||this;return o.fillStyle=n,o.draw=function(t,e){void 0===t&&(t=o.fillStyle),void 0===e&&(e=o.ctx),e.save(),e.fillStyle=t,e.fillRect(0,0,o.canvas.width,o.canvas.height),e.restore()},o.update=function(t){return function(t){o.draw()}},o}return r(e,t),e.prototype.setup=function(){},e}(n(0).CanvasAnimator);e.BackgroundAnimator=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.canvas=e,o.grid=n,o}return r(e,t),e.prototype.x=function(t){return Math.round(t*this.canvas.width/this.grid.cols)},e.prototype.y=function(t){return Math.round(t*this.canvas.height/this.grid.rows)},e}(n(0).CanvasAnimator);e.CanvasGridAnimator=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){void 0===e&&(e=function(){}),this.loaded=0,this.images={};var n=0;for(var o in t)t.hasOwnProperty(o)&&n++;for(var o in this.total=n,t)t.hasOwnProperty(o)&&(this.images[o]=new Image,this.images[o].src=t[o]);this.onLoad(e)}return t.prototype.hasImage=function(t){return null!=this.images[t]},t.prototype.onLoad=function(t){var e=this;for(var n in this.images)this.images.hasOwnProperty(n)&&(this.loaded<this.total?this.images[n].addEventListener("load",(function(){++e.loaded>=e.total&&t(e.images)}),!1):t(this.images))},t}();e.ImageLoader=o},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(10)),o(n(11)),o(n(12)),o(n(13)),o(n(14)),o(n(15)),o(n(3)),o(n(1)),o(n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(2),i=function(){function t(){}return t.draw=function(t,e){var n=e.x,i=e.y,a=e.width,u=e.height,s=e.radius,c=e.fillStyle,l=e.strokeStyle,f=void 0===l?"rgba(255,255,255,0)":l,d=e.borderWidth,v=void 0===d?Math.min(4,a/36*4):d,h=e.hoverStyle,y=e.text,p=e.font,m=e.textStyle,g=e.state;t.save(),"hover"===g&&h?c=h:c&&(c=c),t.lineWidth=v,"hover"===g&&h?f=h:f&&(f=f),o.RoundedRect.draw(t,{x:n,y:i,width:a,height:u,radius:s,fillStyle:c,strokeStyle:f}),r.Text.draw(t,{text:y,x:n+a/2,y:i+u/2,maxWidth:.9*a,font:p,fillStyle:"string"==typeof m?m:m()}),t.restore()},t}();e.Button=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.create=function(t,e,n){return{center:{x:t,y:e},radius:n}},t.draw=function(t,e){var n=e.center,o=e.radius,r=e.fillStyle,i=e.strokeStyle;t.save(),t.beginPath(),t.arc(n.x,n.y,o,0,2*Math.PI),t.closePath(),r&&(t.fillStyle=r,t.fill()),i&&(t.strokeStyle=i,t.stroke()),t.restore()},t}();e.Circle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.getPixel=function(t,e,n){var o=t.getImageData(e,n,1,1).data;return{position:{x:e,y:n},color:{r:o[0],g:o[1],b:o[2],a:o[3]}}},t.getCanvasPixels=function(t){for(var e=t.getContext("2d").getImageData(0,0,t.width,t.height).data,n=[],o=0;o<e.length;o+=4){var r=Math.floor(o/4);e[o+3]>0&&n.push({position:{x:r%t.width,y:Math.floor(r/t.width)},color:{r:e[o],g:e[o+1],b:e[o+2],a:e[o+3]}})}return n},t}();e.Image=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.draw=function(t,e){var n=e.start,o=e.end;t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),t.stroke(),t.closePath()},t}();e.Line=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=function(){function t(){}return t.addClickEventListener=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t.getMousePos(e),a=function(t){var e=i(t);n.forEach((function(n){n.enabled&&o.Rect.contains(e,n)&&n.onClick(t)}))};return e.addEventListener("click",a),{type:"click",function:a}},t.addHoverEventListener=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t.getMousePos(e),a=function(t){var r=i(t),a=!1;n.forEach((function(e){e.enabled&&o.Rect.contains(r,e)?("hover"!==e.state&&(e.state="hover",e.onMouseEnter&&e.onMouseEnter(t)),a=!0):"hover"===e.state&&(e.state=void 0,e.onMouseLeave&&e.onMouseLeave(t))})),e.style.cursor=a?"pointer":"default"};return e.addEventListener("mousemove",a),{type:"mousemove",function:a}},t.getMousePos=function(t){return function(e){var n=t.getBoundingClientRect();return{x:(e.clientX-n.left)/(n.right-n.left)*t.width,y:(e.clientY-n.top)/(n.bottom-n.top)*t.height}}},t}();e.Mouse=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.create=function(t,e,n){return{x:t,y:e,z:n}},t.squaredDistance=function(t,e){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+(void 0!==t.z&&void 0!==e.z?Math.pow(e.z-t.z,2):0)},t.distance=function(t,e){return Math.sqrt(this.squaredDistance(t,e))},t.scale=function(t,e){return e.x*=t,e.y*=t,void 0!==e.z&&(e.z*=t),e},t.equals=function(t){return function(e){return null!=t&&null!=e&&t.x===e.x&&t.y===e.y&&t.z===e.z}},t}();e.Point=o}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2NhbnZhcy10b29scy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvYW5pbWF0b3JzL2NhbnZhcy1hbmltYXRvci50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvcm91bmRlZC1yZWN0LnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy90ZXh0LnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy9yZWN0LnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy9jYW52YXMtdG9vbHMudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL2FuaW1hdG9ycy9pbmRleC50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvYW5pbWF0b3JzL2JhY2tncm91bmQtYW5pbWF0b3IudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL2FuaW1hdG9ycy9jYW52YXMtZ3JpZC1hbmltYXRvci50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvbGliL2ltYWdlLWxvYWRlci50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL3Rvb2xzL2J1dHRvbi50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvY2lyY2xlLnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy9pbWFnZS50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvbGluZS50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvbW91c2UudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL3Rvb2xzL3BvaW50LnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjYW52YXMiLCJmcHMiLCJ1cGRhdGUiLCJ0MSIsInQyIiwiZHJhdyIsImFuaW1hdGlvbkZyYW1lSWQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0aGlzIiwiY3R4IiwiZ2V0Q29udGV4dCIsInNldFRpbWVvdXQiLCJzZXR1cCIsImNsZWFyIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJkZXN0cm95IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJDYW52YXNBbmltYXRvciIsIngiLCJ5IiwicmFkaXVzIiwiZmlsbFN0eWxlIiwic3Ryb2tlU3R5bGUiLCJ0bCIsInRyIiwiYnIiLCJibCIsInNhdmUiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJxdWFkcmF0aWNDdXJ2ZVRvIiwiY2xvc2VQYXRoIiwiZmlsbCIsInN0cm9rZSIsInJlc3RvcmUiLCJSb3VuZGVkUmVjdCIsIkZPTlRfRkFNSUxZIiwidGV4dCIsIm1heFdpZHRoIiwiZm9udCIsInRleHRBbGlnbiIsInRleHRCYXNlbGluZSIsIlRleHQiLCJnZXRGb250IiwiZmlsbFRleHQiLCJzdHJva2VUZXh0IiwiZm9udFNpemUiLCJjb250YWlucyIsInBvcyIsInJlY3QiLCJpbnRlcnNlY3RzIiwicmFuZ2UiLCJyZWN0MiIsIlJlY3QiLCJBbmltYXRvcnMiLCJJbWFnZUxvYWRlciIsImNvbnRhaW5lcklkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJjc3NUZXh0IiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJhcHBlbmQiLCJmaWxsUmVjdCIsIkJhY2tncm91bmRBbmltYXRvciIsImdyaWQiLCJNYXRoIiwicm91bmQiLCJjb2xzIiwicm93cyIsIkNhbnZhc0dyaWRBbmltYXRvciIsInNvdXJjZXMiLCJjYWxsYmFjayIsImxvYWRlZCIsImltYWdlcyIsInNyYyIsInRvdGFsIiwiSW1hZ2UiLCJvbkxvYWQiLCJoYXNJbWFnZSIsImltZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJib3JkZXJXaWR0aCIsImhvdmVyU3R5bGUiLCJ0ZXh0U3R5bGUiLCJzdGF0ZSIsImxpbmVXaWR0aCIsIkJ1dHRvbiIsImNlbnRlciIsImFyYyIsIlBJIiwiQ2lyY2xlIiwiZ2V0UGl4ZWwiLCJkYXRhIiwiZ2V0SW1hZ2VEYXRhIiwicG9zaXRpb24iLCJjb2xvciIsImciLCJiIiwiYSIsImdldENhbnZhc1BpeGVscyIsInJnYmEiLCJsZW5ndGgiLCJwaXhlbCIsImZsb29yIiwicHVzaCIsInN0YXJ0IiwiZW5kIiwiTGluZSIsImFkZENsaWNrRXZlbnRMaXN0ZW5lciIsImdldE1vdXNlUG9zIiwiTW91c2UiLCJoYW5kbGVyIiwiZSIsImJ1dHRvbnMiLCJmb3JFYWNoIiwiYnV0dG9uIiwiZW5hYmxlZCIsIm9uQ2xpY2siLCJ0eXBlIiwiZnVuY3Rpb24iLCJhZGRIb3ZlckV2ZW50TGlzdGVuZXIiLCJpbnRlcnNlY3QiLCJvbk1vdXNlRW50ZXIiLCJ1bmRlZmluZWQiLCJvbk1vdXNlTGVhdmUiLCJjdXJzb3IiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjbGllbnRYIiwibGVmdCIsInJpZ2h0IiwiY2xpZW50WSIsInRvcCIsImJvdHRvbSIsInoiLCJzcXVhcmVkRGlzdGFuY2UiLCJwMSIsInAyIiwicG93IiwiZGlzdGFuY2UiLCJzcXJ0Iiwic2NhbGUiLCJmYWN0b3IiLCJlcXVhbHMiLCJQb2ludCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxlQUFnQixHQUFJSCxHQUNELGlCQUFaQyxRQUNkQSxRQUFRLGdCQUFrQkQsSUFFMUJELEVBQUssZ0JBQWtCQyxJQVJ6QixDQVNHSyxRQUFRLFdBQ1gsTyxZQ1RFLElBQUlDLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVQLFFBR25DLElBQUlDLEVBQVNJLEVBQWlCRSxHQUFZLENBQ3pDQyxFQUFHRCxFQUNIRSxHQUFHLEVBQ0hULFFBQVMsSUFVVixPQU5BVSxFQUFRSCxHQUFVSSxLQUFLVixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTTSxHQUcvREwsRUFBT1EsR0FBSSxFQUdKUixFQUFPRCxRQTBEZixPQXJEQU0sRUFBb0JNLEVBQUlGLEVBR3hCSixFQUFvQk8sRUFBSVIsRUFHeEJDLEVBQW9CUSxFQUFJLFNBQVNkLEVBQVNlLEVBQU1DLEdBQzNDVixFQUFvQlcsRUFBRWpCLEVBQVNlLElBQ2xDRyxPQUFPQyxlQUFlbkIsRUFBU2UsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFVixFQUFvQmdCLEVBQUksU0FBU3RCLEdBQ1gsb0JBQVh1QixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWVuQixFQUFTdUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlbkIsRUFBUyxhQUFjLENBQUV5QixPQUFPLEtBUXZEbkIsRUFBb0JvQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUs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LEVBQUcsU0FDWjRHLElBQVRZLEVBQUdGLFFBQTRCVixJQUFUYSxFQUFHSCxFQUFrQnBFLEtBQUt3RSxJQUFJRCxFQUFHSCxFQUFJRSxFQUFHRixFQUFHLEdBQUssSUFHcEUsRUFBQUssU0FBUCxTQUFnQkgsRUFBWUMsR0FDMUIsT0FBT3ZFLEtBQUswRSxLQUFLekksS0FBS29JLGdCQUFnQkMsRUFBSUMsS0FFckMsRUFBQUksTUFBUCxTQUFhQyxFQUFnQnJKLEdBTTNCLE9BTEFBLEVBQUVzQixHQUFLK0gsRUFDUHJKLEVBQUV1QixHQUFLOEgsT0FDS2xCLElBQVJuSSxFQUFFNkksSUFDSjdJLEVBQUU2SSxHQUFLUSxHQUVGckosR0FuQkYsRUFBQXNKLE9BQVMsU0FBQ1AsR0FBZSxnQkFBQ0MsR0FDL0IsT0FBYSxNQUFORCxHQUFvQixNQUFOQyxHQUFjRCxFQUFHekgsSUFBTTBILEVBQUcxSCxHQUFLeUgsRUFBR3hILElBQU15SCxFQUFHekgsR0FBS3dILEVBQUdGLElBQU1HLEVBQUdILElBb0JyRixFQTFCQSxHQUFhLEVBQUFVIiwiZmlsZSI6ImNhbnZhcy10b29scy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiY2FudmFzLXRvb2xzXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImNhbnZhcy10b29sc1wiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJjYW52YXMtdG9vbHNcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDYW52YXNBbmltYXRvciB7XG4gIHByb3RlY3RlZCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgcHJvdGVjdGVkIGFuaW1hdGlvbkZyYW1lSWQ/OiBudW1iZXI7XG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBwdWJsaWMgZnBzID0gMzApIHtcbiAgICB0aGlzLmN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuc2V0dXAoKTtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUoMCkpO1xuICAgIH0sIDApO1xuICB9XG4gIHB1YmxpYyBhYnN0cmFjdCBkcmF3KHN0YXRlPzogYW55LCBjdHg/OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkO1xuICBwdWJsaWMgYWJzdHJhY3Qgc2V0dXAoKTogdm9pZDtcbiAgcHJvdGVjdGVkIHVwZGF0ZSA9ICh0MTogRE9NSGlnaFJlc1RpbWVTdGFtcCkgPT4gKHQyOiBET01IaWdoUmVzVGltZVN0YW1wKSA9PiB7XG4gICAgaWYgKHQyIC0gdDEgPiAxMDAwIC8gdGhpcy5mcHMpIHtcbiAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgdGhpcy5hbmltYXRpb25GcmFtZUlkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZSh0MikpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbkZyYW1lSWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlKHQxKSk7XG4gICAgfVxuICB9O1xuICBwdWJsaWMgY2xlYXIoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSB0aGlzLmN0eCk6IHZvaWQge1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gIH1cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBJUmVjdCB9IGZyb20gJy4vcmVjdCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJvdW5kZWRSZWN0UmFkaXVzIHtcbiAgdGw6IG51bWJlcjtcbiAgdHI6IG51bWJlcjtcbiAgYnI6IG51bWJlcjtcbiAgYmw6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUm91bmRlZFJlY3QgZXh0ZW5kcyBJUmVjdCB7XG4gIHJhZGl1czogbnVtYmVyIHwgSVJvdW5kZWRSZWN0UmFkaXVzO1xuICBmaWxsU3R5bGU/OiBzdHJpbmc7XG4gIHN0cm9rZVN0eWxlPzogc3RyaW5nO1xufVxuZXhwb3J0IGNsYXNzIFJvdW5kZWRSZWN0IHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG4gIHN0YXRpYyBkcmF3KFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIHsgeCwgeSwgd2lkdGgsIGhlaWdodCwgcmFkaXVzLCBmaWxsU3R5bGUsIHN0cm9rZVN0eWxlIH06IElSb3VuZGVkUmVjdFxuICApIHtcbiAgICBpZiAodHlwZW9mIHJhZGl1cyA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJhZGl1cyA9IHtcbiAgICAgICAgdGw6IHJhZGl1cyxcbiAgICAgICAgdHI6IHJhZGl1cyxcbiAgICAgICAgYnI6IHJhZGl1cyxcbiAgICAgICAgYmw6IHJhZGl1c1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8oeCArIHJhZGl1cy50bCwgeSk7XG4gICAgY3R4LmxpbmVUbyh4ICsgd2lkdGggLSByYWRpdXMudHIsIHkpO1xuICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCwgeSwgeCArIHdpZHRoLCB5ICsgcmFkaXVzLnRyKTtcbiAgICBjdHgubGluZVRvKHggKyB3aWR0aCwgeSArIGhlaWdodCAtIHJhZGl1cy5icik7XG4gICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoLCB5ICsgaGVpZ2h0LCB4ICsgd2lkdGggLSByYWRpdXMuYnIsIHkgKyBoZWlnaHQpO1xuICAgIGN0eC5saW5lVG8oeCArIHJhZGl1cy5ibCwgeSArIGhlaWdodCk7XG4gICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSArIGhlaWdodCwgeCwgeSArIGhlaWdodCAtIHJhZGl1cy5ibCk7XG4gICAgY3R4LmxpbmVUbyh4LCB5ICsgcmFkaXVzLnRsKTtcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4LCB5LCB4ICsgcmFkaXVzLnRsLCB5KTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG5cbiAgICBpZiAoZmlsbFN0eWxlKSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xuICAgICAgY3R4LmZpbGwoKTtcbiAgICB9XG4gICAgaWYgKHN0cm9rZVN0eWxlKSB7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZTtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIElUZXh0Qm94IHtcbiAgdGV4dDogc3RyaW5nO1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbiAgbWF4V2lkdGg/OiBudW1iZXI7XG4gIGZvbnQ6IHN0cmluZyB8IG51bWJlcjtcbiAgZmlsbFN0eWxlPzogc3RyaW5nO1xuICBzdHJva2VTdHlsZT86IHN0cmluZztcbiAgdGV4dEFsaWduPzogQ2FudmFzVGV4dEFsaWduO1xuICB0ZXh0QmFzZWxpbmU/OiBDYW52YXNUZXh0QmFzZWxpbmU7XG59XG5leHBvcnQgY2xhc3MgVGV4dCB7XG4gIHN0YXRpYyBGT05UX0ZBTUlMWSA9XG4gICAgJ01vbnRzZXJyYXQsIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgXCJTZWdvZSBVSVwiLCBSb2JvdG8sIFwiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWYsIFwiQXBwbGUgQ29sb3IgRW1vamlcIiwgXCJTZWdvZSBVSSBFbW9qaVwiLCBcIlNlZ29lIFVJIFN5bWJvbFwiJztcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG4gIHN0YXRpYyBkcmF3ID0gKFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIHtcbiAgICAgIHRleHQsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIG1heFdpZHRoLFxuICAgICAgZm9udCxcbiAgICAgIGZpbGxTdHlsZSxcbiAgICAgIHN0cm9rZVN0eWxlLFxuICAgICAgdGV4dEFsaWduID0gJ2NlbnRlcicsXG4gICAgICB0ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJ1xuICAgIH06IElUZXh0Qm94XG4gICkgPT4ge1xuICAgIGN0eC5zYXZlKCk7XG5cbiAgICBpZiAodHlwZW9mIGZvbnQgPT09ICdudW1iZXInKSB7XG4gICAgICBmb250ID0gVGV4dC5nZXRGb250KGZvbnQpO1xuICAgIH1cbiAgICBjdHguZm9udCA9IGZvbnQ7XG4gICAgY3R4LnRleHRBbGlnbiA9IHRleHRBbGlnbjtcbiAgICBjdHgudGV4dEJhc2VsaW5lID0gdGV4dEJhc2VsaW5lO1xuXG4gICAgaWYgKCFmaWxsU3R5bGUgJiYgIXN0cm9rZVN0eWxlKSB7XG4gICAgICBmaWxsU3R5bGUgPSAnYmxhY2snO1xuICAgIH1cblxuICAgIGlmIChmaWxsU3R5bGUpIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgICBjdHguZmlsbFRleHQodGV4dCwgeCwgeSwgbWF4V2lkdGgpO1xuICAgIH1cbiAgICBpZiAoc3Ryb2tlU3R5bGUpIHtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xuICAgICAgY3R4LnN0cm9rZVRleHQodGV4dCwgeCwgeSwgbWF4V2lkdGgpO1xuICAgIH1cblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH07XG4gIHN0YXRpYyBnZXRGb250ID0gKGZvbnRTaXplOiBudW1iZXIpID0+IHtcbiAgICByZXR1cm4gZm9udFNpemUgKyAncHggJyArIFRleHQuRk9OVF9GQU1JTFk7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBJUG9pbnQgfSBmcm9tICcuL3BvaW50JztcblxuZXhwb3J0IGludGVyZmFjZSBJUmVjdCB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFJlY3Qge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbiAgc3RhdGljIGNvbnRhaW5zID0gKHBvczogSVBvaW50LCByZWN0OiBJUmVjdCkgPT5cbiAgICBwb3MueCA+IHJlY3QueCAmJiBwb3MueCA8IHJlY3QueCArIHJlY3Qud2lkdGggJiYgcG9zLnkgPCByZWN0LnkgKyByZWN0LmhlaWdodCAmJiBwb3MueSA+IHJlY3QueTtcblxuICBzdGF0aWMgaW50ZXJzZWN0cyA9IChyYW5nZTogSVJlY3QsIHJlY3QyOiBJUmVjdCkgPT5cbiAgICAhKFxuICAgICAgcmFuZ2UueCA+IHJlY3QyLnggKyByZWN0Mi53aWR0aCB8fFxuICAgICAgcmFuZ2UueCArIHJhbmdlLndpZHRoIDwgcmVjdDIueCB8fFxuICAgICAgcmFuZ2UueSA+IHJlY3QyLnkgKyByYW5nZS5oZWlnaHQgfHxcbiAgICAgIHJhbmdlLnkgKyByYW5nZS5oZWlnaHQgPCByZWN0Mi55XG4gICAgKTtcbn1cbiIsImltcG9ydCAqIGFzIEFuaW1hdG9ycyBmcm9tICcuL2FuaW1hdG9ycy9pbmRleCc7XG5pbXBvcnQgeyBJbWFnZUxvYWRlciB9IGZyb20gJy4vbGliL2ltYWdlLWxvYWRlcic7XG4vLyBpbXBvcnQgKiBhcyBTaGFwZXMgZnJvbSAnLi90b29scy9pbmRleCc7XG5cbmV4cG9ydCB7IEFuaW1hdG9ycywgSW1hZ2VMb2FkZXIgfTtcbmV4cG9ydCAqIGZyb20gJy4vdG9vbHMvaW5kZXgnO1xuIiwiZXhwb3J0ICogZnJvbSAnLi9iYWNrZ3JvdW5kLWFuaW1hdG9yJztcbmV4cG9ydCAqIGZyb20gJy4vY2FudmFzLWFuaW1hdG9yJztcbmV4cG9ydCAqIGZyb20gJy4vY2FudmFzLWdyaWQtYW5pbWF0b3InO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzRWxlbWVudChcbiAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgd2lkdGggPSA2MDAsXG4gIGhlaWdodCA9IDYwMFxuKTogSFRNTENhbnZhc0VsZW1lbnQge1xuICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIGNhbnZhcy5zdHlsZS5jc3NUZXh0ID0gJ3dpZHRoOiAxMDAlOyc7XG5cbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVySWQpO1xuICBpZiAoY29udGFpbmVyPy5pbm5lckhUTUwpIHtcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gIH1cbiAgY29udGFpbmVyPy5hcHBlbmQoY2FudmFzKTtcbiAgcmV0dXJuIGNhbnZhcztcbn1cbiIsImltcG9ydCB7IENhbnZhc0FuaW1hdG9yIH0gZnJvbSAnLi9jYW52YXMtYW5pbWF0b3InO1xuXG5leHBvcnQgY2xhc3MgQmFja2dyb3VuZEFuaW1hdG9yIGV4dGVuZHMgQ2FudmFzQW5pbWF0b3Ige1xuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBwdWJsaWMgZmlsbFN0eWxlOiBzdHJpbmcgPSAnIzIzMjMyMycpIHtcbiAgICBzdXBlcihjYW52YXMpO1xuICB9XG4gIHB1YmxpYyBzZXR1cCgpIHt9XG4gIHB1YmxpYyBkcmF3ID0gKGZpbGxTdHlsZSA9IHRoaXMuZmlsbFN0eWxlLCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9IHRoaXMuY3R4KSA9PiB7XG4gICAgY3R4LnNhdmUoKTtcblxuICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfTtcbiAgcHJvdGVjdGVkIHVwZGF0ZSA9ICh0MTogRE9NSGlnaFJlc1RpbWVTdGFtcCkgPT4gKHQyOiBET01IaWdoUmVzVGltZVN0YW1wKSA9PiB7XG4gICAgdGhpcy5kcmF3KCk7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBDYW52YXNBbmltYXRvciB9IGZyb20gJy4vY2FudmFzLWFuaW1hdG9yJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhbnZhc0dyaWRBbmltYXRvciBleHRlbmRzIENhbnZhc0FuaW1hdG9yIHtcbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIHByb3RlY3RlZCBncmlkOiB7IGNvbHM6IG51bWJlcjsgcm93czogbnVtYmVyIH0pIHtcbiAgICBzdXBlcihjYW52YXMpO1xuICB9XG4gIHByb3RlY3RlZCB4KHg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoKHggKiB0aGlzLmNhbnZhcy53aWR0aCkgLyB0aGlzLmdyaWQuY29scyk7XG4gIH1cbiAgcHJvdGVjdGVkIHkoeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgoeSAqIHRoaXMuY2FudmFzLmhlaWdodCkgLyB0aGlzLmdyaWQucm93cyk7XG4gIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgSUltYWdlU2V0IHtcbiAgW2tleTogc3RyaW5nXTogSFRNTEltYWdlRWxlbWVudDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUltYWdlU291cmNlU2V0IHtcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xufVxuZXhwb3J0IGNsYXNzIEltYWdlTG9hZGVyIHtcbiAgcHJpdmF0ZSBsb2FkZWQgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IHRvdGFsOiBudW1iZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgaW1hZ2VzOiBJSW1hZ2VTZXQgPSB7fTtcbiAgY29uc3RydWN0b3Ioc291cmNlczogSUltYWdlU291cmNlU2V0LCBjYWxsYmFjazogKGltYWdlczogSUltYWdlU2V0KSA9PiB2b2lkID0gKCkgPT4ge30pIHtcbiAgICBsZXQgdCA9IDA7XG4gICAgZm9yIChjb25zdCBzcmMgaW4gc291cmNlcykge1xuICAgICAgaWYgKHNvdXJjZXMuaGFzT3duUHJvcGVydHkoc3JjKSkge1xuICAgICAgICB0Kys7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudG90YWwgPSB0O1xuXG4gICAgZm9yIChjb25zdCBzcmMgaW4gc291cmNlcykge1xuICAgICAgaWYgKHNvdXJjZXMuaGFzT3duUHJvcGVydHkoc3JjKSkge1xuICAgICAgICB0aGlzLmltYWdlc1tzcmNdID0gbmV3IEltYWdlKCk7XG4gICAgICAgIHRoaXMuaW1hZ2VzW3NyY10uc3JjID0gc291cmNlc1tzcmNdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMub25Mb2FkKGNhbGxiYWNrKTtcbiAgfVxuXG4gIHB1YmxpYyBoYXNJbWFnZShpbWc6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmltYWdlc1tpbWddICE9IG51bGw7XG4gIH1cbiAgcHVibGljIG9uTG9hZChjYWxsYmFjazogKGltYWdlczogSUltYWdlU2V0KSA9PiB2b2lkKSB7XG4gICAgZm9yIChjb25zdCBpbWcgaW4gdGhpcy5pbWFnZXMpIHtcbiAgICAgIGlmICh0aGlzLmltYWdlcy5oYXNPd25Qcm9wZXJ0eShpbWcpKSB7XG4gICAgICAgIGlmICh0aGlzLmxvYWRlZCA8IHRoaXMudG90YWwpIHtcbiAgICAgICAgICB0aGlzLmltYWdlc1tpbWddLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAnbG9hZCcsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICgrK3RoaXMubG9hZGVkID49IHRoaXMudG90YWwpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLmltYWdlcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2sodGhpcy5pbWFnZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgKiBmcm9tICcuL2J1dHRvbic7XG5leHBvcnQgKiBmcm9tICcuL2NpcmNsZSc7XG5leHBvcnQgKiBmcm9tICcuL2ltYWdlJztcbmV4cG9ydCAqIGZyb20gJy4vbGluZSc7XG5leHBvcnQgKiBmcm9tICcuL21vdXNlJztcbmV4cG9ydCAqIGZyb20gJy4vcG9pbnQnO1xuZXhwb3J0ICogZnJvbSAnLi9yZWN0JztcbmV4cG9ydCAqIGZyb20gJy4vcm91bmRlZC1yZWN0JztcbmV4cG9ydCAqIGZyb20gJy4vdGV4dCc7XG4iLCJpbXBvcnQgeyBJQ2xpY2tFdmVudE9iamVjdCwgSUhvdmVyRXZlbnRPYmplY3QgfSBmcm9tICcuL21vdXNlJztcbmltcG9ydCB7IElSb3VuZGVkUmVjdCwgUm91bmRlZFJlY3QgfSBmcm9tICcuL3JvdW5kZWQtcmVjdCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi90ZXh0JztcbmV4cG9ydCBpbnRlcmZhY2UgSUJ1dHRvbiBleHRlbmRzIElSb3VuZGVkUmVjdCwgSUNsaWNrRXZlbnRPYmplY3QsIElIb3ZlckV2ZW50T2JqZWN0IHtcbiAgYm9yZGVyV2lkdGg/OiBudW1iZXI7XG4gIGhvdmVyU3R5bGU/OiBzdHJpbmc7XG4gIHRleHQ6IHN0cmluZztcbiAgZm9udDogc3RyaW5nIHwgbnVtYmVyO1xuICB0ZXh0U3R5bGU6IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xufVxuZXhwb3J0IGNsYXNzIEJ1dHRvbiB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGN0eCAtIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRFxuICAgKiBAcGFyYW0gYnV0dG9uIC0gQnV0dG9uXG4gICAqL1xuICBzdGF0aWMgZHJhdyhcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICB7XG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgcmFkaXVzLFxuICAgICAgZmlsbFN0eWxlLFxuICAgICAgc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwKScsXG4gICAgICBib3JkZXJXaWR0aCA9IE1hdGgubWluKDQsICh3aWR0aCAvIDM2KSAqIDQpLFxuICAgICAgaG92ZXJTdHlsZSxcbiAgICAgIHRleHQsXG4gICAgICBmb250LFxuICAgICAgdGV4dFN0eWxlLFxuICAgICAgc3RhdGVcbiAgICB9OiBJQnV0dG9uXG4gICkge1xuICAgIGN0eC5zYXZlKCk7XG5cbiAgICBpZiAoc3RhdGUgPT09ICdob3ZlcicgJiYgaG92ZXJTdHlsZSkge1xuICAgICAgZmlsbFN0eWxlID0gaG92ZXJTdHlsZTtcbiAgICB9IGVsc2UgaWYgKGZpbGxTdHlsZSkge1xuICAgICAgZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xuICAgIH1cblxuICAgIGN0eC5saW5lV2lkdGggPSBib3JkZXJXaWR0aDtcblxuICAgIGlmIChzdGF0ZSA9PT0gJ2hvdmVyJyAmJiBob3ZlclN0eWxlKSB7XG4gICAgICBzdHJva2VTdHlsZSA9IGhvdmVyU3R5bGU7XG4gICAgfSBlbHNlIGlmIChzdHJva2VTdHlsZSkge1xuICAgICAgc3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZTtcbiAgICB9XG5cbiAgICBSb3VuZGVkUmVjdC5kcmF3KGN0eCwge1xuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIHJhZGl1cyxcbiAgICAgIGZpbGxTdHlsZSxcbiAgICAgIHN0cm9rZVN0eWxlXG4gICAgfSk7XG5cbiAgICBUZXh0LmRyYXcoY3R4LCB7XG4gICAgICB0ZXh0LFxuICAgICAgeDogeCArIHdpZHRoIC8gMixcbiAgICAgIHk6IHkgKyBoZWlnaHQgLyAyLFxuICAgICAgbWF4V2lkdGg6IHdpZHRoICogMC45LFxuICAgICAgZm9udCxcbiAgICAgIGZpbGxTdHlsZTogdHlwZW9mIHRleHRTdHlsZSA9PT0gJ3N0cmluZycgPyB0ZXh0U3R5bGUgOiB0ZXh0U3R5bGUoKVxuICAgIH0pO1xuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSVBvaW50IH0gZnJvbSAnLi9wb2ludCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNpcmNsZSB7XG4gIGNlbnRlcjogSVBvaW50O1xuICByYWRpdXM6IG51bWJlcjtcbiAgZmlsbFN0eWxlPzogc3RyaW5nO1xuICBzdHJva2VTdHlsZT86IHN0cmluZztcbn1cbmV4cG9ydCBjbGFzcyBDaXJjbGUge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbiAgc3RhdGljIGNyZWF0ZSh4OiBudW1iZXIsIHk6IG51bWJlciwgcmFkaXVzOiBudW1iZXIpOiBDaXJjbGUge1xuICAgIGNvbnN0IGNlbnRlciA9IHsgeCwgeSB9O1xuICAgIHJldHVybiB7IGNlbnRlciwgcmFkaXVzIH07XG4gIH1cbiAgLyoqXG4gICAqIERyYXdzIGEgY2lyY2xlXG4gICAqIEBwYXJhbSBjdHggLSB0aGUgY2FudmFzIHJlbmRlcmluZyBjb250ZXh0XG4gICAqIEBwYXJhbSBjaXJjbGUgLSB0aGUgY2lyY2xlIHRvIGRyYXdcbiAgICogQHBhcmFtIGZpbGxTdHlsZSAtIHRoZSBzdHlsZSB0byBmaWxsIHRoZSBjaXJjbGVcbiAgICogQHBhcmFtIHN0cm9rZVN0eWxlIC0gdGhlIHN0eWxlIHRvIHN0cm9rZSB0aGUgY2lyY2xlXG4gICAqL1xuICBzdGF0aWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeyBjZW50ZXIsIHJhZGl1cywgZmlsbFN0eWxlLCBzdHJva2VTdHlsZSB9OiBJQ2lyY2xlKSB7XG4gICAgY3R4LnNhdmUoKTtcblxuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguYXJjKGNlbnRlci54LCBjZW50ZXIueSwgcmFkaXVzLCAwLCBNYXRoLlBJICogMik7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuXG4gICAgaWYgKGZpbGxTdHlsZSkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcbiAgICAgIGN0eC5maWxsKCk7XG4gICAgfVxuXG4gICAgaWYgKHN0cm9rZVN0eWxlKSB7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZTtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJUG9pbnQgfSBmcm9tICcuL3BvaW50JztcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbG9yIHtcbiAgcjogbnVtYmVyO1xuICBnOiBudW1iZXI7XG4gIGI6IG51bWJlcjtcbiAgYTogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBJUGl4ZWwge1xuICBwb3NpdGlvbjogSVBvaW50O1xuICBjb2xvcjogSUNvbG9yO1xufVxuZXhwb3J0IGNsYXNzIEltYWdlIHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG4gIHN0YXRpYyBnZXRQaXhlbChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBJUGl4ZWwgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKHgsIHksIDEsIDEpLmRhdGE7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvc2l0aW9uOiB7IHgsIHkgfSxcbiAgICAgIGNvbG9yOiB7XG4gICAgICAgIHI6IGRhdGFbMF0sXG4gICAgICAgIGc6IGRhdGFbMV0sXG4gICAgICAgIGI6IGRhdGFbMl0sXG4gICAgICAgIGE6IGRhdGFbM11cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHN0YXRpYyBnZXRDYW52YXNQaXhlbHMoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCk6IElQaXhlbFtdIHtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgY29uc3QgZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KS5kYXRhO1xuXG4gICAgY29uc3QgcmdiYTogSVBpeGVsW10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gNCkge1xuICAgICAgY29uc3QgcGl4ZWwgPSBNYXRoLmZsb29yKGkgLyA0KTtcbiAgICAgIGNvbnN0IGFscGhhID0gZGF0YVtpICsgM107XG4gICAgICBpZiAoYWxwaGEgPiAwKSB7XG4gICAgICAgIHJnYmEucHVzaCh7XG4gICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgIHg6IHBpeGVsICUgY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgeTogTWF0aC5mbG9vcihwaXhlbCAvIGNhbnZhcy53aWR0aClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgICByOiBkYXRhW2ldLFxuICAgICAgICAgICAgZzogZGF0YVtpICsgMV0sXG4gICAgICAgICAgICBiOiBkYXRhW2kgKyAyXSxcbiAgICAgICAgICAgIGE6IGRhdGFbaSArIDNdXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmdiYTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSVBvaW50IH0gZnJvbSAnLi9wb2ludCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxpbmUge1xuICBzdGFydDogSVBvaW50O1xuICBlbmQ6IElQb2ludDtcbn1cblxuZXhwb3J0IGNsYXNzIExpbmUge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbiAgc3RhdGljIGRyYXcgPSAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHsgc3RhcnQsIGVuZCB9OiBJTGluZSkgPT4ge1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgubW92ZVRvKHN0YXJ0LngsIHN0YXJ0LnkpO1xuICAgIGN0eC5saW5lVG8oZW5kLngsIGVuZC55KTtcbiAgICBjdHguc3Ryb2tlKCk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgSVJlY3QsIFJlY3QgfSBmcm9tICcuL3JlY3QnO1xuXG5leHBvcnQgdHlwZSBNb3VzZUV2ZW50TGlzdGVuZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IGFueTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNsaWNrRXZlbnRPYmplY3QgZXh0ZW5kcyBJUmVjdCB7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIG9uQ2xpY2s6IE1vdXNlRXZlbnRMaXN0ZW5lcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUhvdmVyRXZlbnRPYmplY3QgZXh0ZW5kcyBJUmVjdCB7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIHN0YXRlPzogJ2hvdmVyJztcbiAgb25Nb3VzZUVudGVyPzogTW91c2VFdmVudExpc3RlbmVyO1xuICBvbk1vdXNlTGVhdmU/OiBNb3VzZUV2ZW50TGlzdGVuZXI7XG59XG5leHBvcnQgY2xhc3MgTW91c2Uge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbiAgc3RhdGljIGFkZENsaWNrRXZlbnRMaXN0ZW5lciA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCAuLi5idXR0b25zOiBJQ2xpY2tFdmVudE9iamVjdFtdKSA9PiB7XG4gICAgY29uc3QgZ2V0TW91c2VQb3MgPSBNb3VzZS5nZXRNb3VzZVBvcyhjYW52YXMpO1xuXG4gICAgY29uc3QgaGFuZGxlciA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBwb3MgPSBnZXRNb3VzZVBvcyhlKTtcbiAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICBpZiAoYnV0dG9uLmVuYWJsZWQgJiYgUmVjdC5jb250YWlucyhwb3MsIGJ1dHRvbikpIHtcbiAgICAgICAgICAvLyBjbGljayBldmVudFxuICAgICAgICAgIGJ1dHRvbi5vbkNsaWNrKGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlcik7XG5cbiAgICByZXR1cm4geyB0eXBlOiAnY2xpY2snLCBmdW5jdGlvbjogaGFuZGxlciB9IGFzIHtcbiAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgIGZ1bmN0aW9uOiBNb3VzZUV2ZW50TGlzdGVuZXI7XG4gICAgfTtcbiAgfTtcbiAgc3RhdGljIGFkZEhvdmVyRXZlbnRMaXN0ZW5lciA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCAuLi5idXR0b25zOiBJSG92ZXJFdmVudE9iamVjdFtdKSA9PiB7XG4gICAgY29uc3QgZ2V0TW91c2VQb3MgPSBNb3VzZS5nZXRNb3VzZVBvcyhjYW52YXMpO1xuXG4gICAgY29uc3QgaGFuZGxlciA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBwb3MgPSBnZXRNb3VzZVBvcyhlKTtcbiAgICAgIGxldCBpbnRlcnNlY3QgPSBmYWxzZTtcbiAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICBpZiAoYnV0dG9uLmVuYWJsZWQgJiYgUmVjdC5jb250YWlucyhwb3MsIGJ1dHRvbikpIHtcbiAgICAgICAgICAvLyBob3ZlciBldmVudFxuICAgICAgICAgIGlmIChidXR0b24uc3RhdGUgIT09ICdob3ZlcicpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5zdGF0ZSA9ICdob3Zlcic7XG4gICAgICAgICAgICBpZiAoYnV0dG9uLm9uTW91c2VFbnRlcikge1xuICAgICAgICAgICAgICBidXR0b24ub25Nb3VzZUVudGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpbnRlcnNlY3QgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvbi5zdGF0ZSA9PT0gJ2hvdmVyJykge1xuICAgICAgICAgIGJ1dHRvbi5zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoYnV0dG9uLm9uTW91c2VMZWF2ZSkge1xuICAgICAgICAgICAgYnV0dG9uLm9uTW91c2VMZWF2ZShlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY2FudmFzLnN0eWxlLmN1cnNvciA9IGludGVyc2VjdCA/ICdwb2ludGVyJyA6ICdkZWZhdWx0JztcbiAgICB9O1xuXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZXIpO1xuXG4gICAgcmV0dXJuIHsgdHlwZTogJ21vdXNlbW92ZScsIGZ1bmN0aW9uOiBoYW5kbGVyIH0gYXMge1xuICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgZnVuY3Rpb246IE1vdXNlRXZlbnRMaXN0ZW5lcjtcbiAgICB9O1xuICB9O1xuICBzdGF0aWMgZ2V0TW91c2VQb3MgPSAoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkgPT4gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiB7XG4gICAgICB4OiAoKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkpICogY2FudmFzLndpZHRoLFxuICAgICAgeTogKChlLmNsaWVudFkgLSByZWN0LnRvcCkgLyAocmVjdC5ib3R0b20gLSByZWN0LnRvcCkpICogY2FudmFzLmhlaWdodFxuICAgIH07XG4gIH07XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIElQb2ludCB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICB6PzogbnVtYmVyO1xufVxuZXhwb3J0IGNsYXNzIFBvaW50IHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG4gIHN0YXRpYyBjcmVhdGUoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo/OiBudW1iZXIpOiBJUG9pbnQge1xuICAgIHJldHVybiB7IHgsIHksIHogfTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzID0gKHAxOiBJUG9pbnQpID0+IChwMjogSVBvaW50KSA9PiB7XG4gICAgcmV0dXJuIHAxICE9IG51bGwgJiYgcDIgIT0gbnVsbCAmJiBwMS54ID09PSBwMi54ICYmIHAxLnkgPT09IHAyLnkgJiYgcDEueiA9PT0gcDIuejtcbiAgfTtcbiAgc3RhdGljIHNxdWFyZWREaXN0YW5jZShwMTogSVBvaW50LCBwMjogSVBvaW50KTogbnVtYmVyIHtcbiAgICByZXR1cm4gKFxuICAgICAgTWF0aC5wb3cocDIueCAtIHAxLngsIDIpICtcbiAgICAgIE1hdGgucG93KHAyLnkgLSBwMS55LCAyKSArXG4gICAgICAocDEueiAhPT0gdW5kZWZpbmVkICYmIHAyLnogIT09IHVuZGVmaW5lZCA/IE1hdGgucG93KHAyLnogLSBwMS56LCAyKSA6IDApXG4gICAgKTtcbiAgfVxuICBzdGF0aWMgZGlzdGFuY2UocDE6IElQb2ludCwgcDI6IElQb2ludCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnNxdWFyZWREaXN0YW5jZShwMSwgcDIpKTtcbiAgfVxuICBzdGF0aWMgc2NhbGUoZmFjdG9yOiBudW1iZXIsIHA6IElQb2ludCk6IElQb2ludCB7XG4gICAgcC54ICo9IGZhY3RvcjtcbiAgICBwLnkgKj0gZmFjdG9yO1xuICAgIGlmIChwLnogIT09IHVuZGVmaW5lZCkge1xuICAgICAgcC56ICo9IGZhY3RvcjtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=