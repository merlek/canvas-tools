!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("canvas-tools",[],e):"object"==typeof exports?exports["canvas-tools"]=e():t["canvas-tools"]=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.canvas=t,this.ctx=t.getContext("2d")}return t.prototype.clear=function(t){void 0===t&&(t=this.ctx),t.clearRect(0,0,this.canvas.width,this.canvas.height)},t}();e.CanvasAnimator=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.draw=function(t,e){var n=e.x,r=e.y,o=e.width,i=e.height,u=e.radius,a=e.fillStyle,s=e.strokeStyle;"number"==typeof u&&(u={tl:u,tr:u,br:u,bl:u}),t.save(),t.beginPath(),t.moveTo(n+u.tl,r),t.lineTo(n+o-u.tr,r),t.quadraticCurveTo(n+o,r,n+o,r+u.tr),t.lineTo(n+o,r+i-u.br),t.quadraticCurveTo(n+o,r+i,n+o-u.br,r+i),t.lineTo(n+u.bl,r+i),t.quadraticCurveTo(n,r+i,n,r+i-u.bl),t.lineTo(n,r+u.tl),t.quadraticCurveTo(n,r,n+u.tl,r),t.closePath(),a&&(t.fillStyle=a,t.fill()),s&&(t.strokeStyle=s,t.stroke()),t.restore()},t}();e.RoundedRect=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.FONT_FAMILY='Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',t.draw=function(e,n){var r=n.text,o=n.x,i=n.y,u=n.maxWidth,a=n.font,s=n.fillStyle,c=n.textAlign,l=void 0===c?"center":c,f=n.textBaseline,d=void 0===f?"middle":f;e.save(),e.fillStyle=s,"number"==typeof a&&(a=t.getFont(a)),e.font=a,e.textAlign=l,e.textBaseline=d,e.fillText(r,o,i,u),e.restore()},t.getFont=function(e){return e+"px "+t.FONT_FAMILY},t}();e.Text=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.isIntersect=function(t,e){return t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y},t}();e.Rect=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5);e.Animators=r;var o=n(8);e.ImageLoader=o.ImageLoader,function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(9))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(6)),r(n(0)),r(n(7))},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){void 0===n&&(n="#232323");var r=t.call(this,e)||this;return r.fillStyle=n,r.draw=function(t,e){void 0===t&&(t=r.fillStyle),void 0===e&&(e=r.ctx),e.save(),e.fillStyle=t,e.fillRect(0,0,r.canvas.width,r.canvas.height),e.restore()},r}return o(e,t),e}(n(0).CanvasAnimator);e.BackgroundAnimator=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this,e)||this;return r.canvas=e,r.grid=n,r}return o(e,t),e.prototype.x=function(t){return Math.round(t*this.canvas.width/this.grid.cols)},e.prototype.y=function(t){return Math.round(t*this.canvas.height/this.grid.rows)},e}(n(0).CanvasAnimator);e.CanvasGridAnimator=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){void 0===e&&(e=function(){}),this.loaded=0,this.images={};var n=0;for(var r in t)t.hasOwnProperty(r)&&n++;for(var r in this.total=n,t)t.hasOwnProperty(r)&&(this.images[r]=new Image,this.images[r].src=t[r]);this.onLoad(e)}return t.prototype.hasImage=function(t){return null!=this.images[t]},t.prototype.onLoad=function(t){var e=this;for(var n in this.images)this.images.hasOwnProperty(n)&&(this.loaded<this.total?this.images[n].addEventListener("load",(function(){++e.loaded>=e.total&&t(e.images)}),!1):t(this.images))},t}();e.ImageLoader=r},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(10)),r(n(11)),r(n(12)),r(n(13)),r(n(14)),r(n(3)),r(n(1)),r(n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(2),i=function(){function t(){}return t.draw=function(t,e){var n=e.x,i=e.y,u=e.width,a=e.height,s=e.radius,c=e.fillStyle,l=e.strokeStyle,f=void 0===l?"rgba(255,255,255,0)":l,d=e.borderWidth,v=void 0===d?Math.min(4,u/36*4):d,y=e.hoverStyle,h=e.text,p=e.font,_=e.textStyle,b=e.state;t.save(),"hover"===b&&y?c=y:c&&(c=c),t.lineWidth=v,"hover"===b&&y?f=y:f&&(f=f),r.RoundedRect.draw(t,{x:n,y:i,width:u,height:a,radius:s,fillStyle:c,strokeStyle:f}),o.Text.draw(t,{text:h,x:n+u/2,y:i+a/2,maxWidth:.9*u,font:p,fillStyle:"string"==typeof _?_:_()}),t.restore()},t}();e.Button=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.create=function(t,e,n){return{center:{x:t,y:e},radius:n}},t.draw=function(t,e){var n=e.center,r=e.radius,o=e.fillStyle,i=e.strokeStyle;t.save(),t.beginPath(),t.arc(n.x,n.y,r,0,2*Math.PI),t.closePath(),o&&(t.fillStyle=o,t.fill()),i&&(t.strokeStyle=i,t.stroke()),t.restore()},t}();e.Circle=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.draw=function(t,e){var n=e.start,r=e.end;t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke(),t.closePath()},t}();e.Line=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=function(){function t(){}return t.addClickEventListener=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t.getMousePos(e),u=function(t){var e=i(t);n.forEach((function(n){n.enabled&&r.Rect.isIntersect(e,n)&&n.onClick(t)}))};return e.addEventListener("click",u),{type:"click",function:u}},t.addHoverEventListener=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t.getMousePos(e),u=function(t){var o=i(t),u=!1;n.forEach((function(e){e.enabled&&r.Rect.isIntersect(o,e)?("hover"!==e.state&&(e.state="hover",e.onMouseEnter&&e.onMouseEnter(t)),u=!0):"hover"===e.state&&(e.state=void 0,e.onMouseLeave&&e.onMouseLeave(t))})),e.style.cursor=u?"pointer":"default"};return e.addEventListener("mousemove",u),{type:"mousemove",function:u}},t.getMousePos=function(t){return function(e){var n=t.getBoundingClientRect();return{x:(e.clientX-n.left)/(n.right-n.left)*t.width,y:(e.clientY-n.top)/(n.bottom-n.top)*t.height}}},t}();e.Mouse=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.create=function(t,e,n){return{x:t,y:e,z:n}},t.squaredDistance=function(t,e){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+(void 0!==t.z&&void 0!==e.z?Math.pow(e.z-t.z,2):0)},t.distance=function(t,e){return Math.sqrt(this.squaredDistance(t,e))},t.scale=function(t,e){return e.x*=t,e.y*=t,void 0!==e.z&&(e.z*=t),e},t.equals=function(t){return function(e){return null!=t&&null!=e&&t.x===e.x&&t.y===e.y&&t.z===e.z}},t}();e.Point=r}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2NhbnZhcy10b29scy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvYW5pbWF0b3JzL2NhbnZhcy1hbmltYXRvci50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvcm91bmRlZC1yZWN0LnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy90ZXh0LnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy9yZWN0LnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy9jYW52YXMtdG9vbHMudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL2FuaW1hdG9ycy9pbmRleC50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvYW5pbWF0b3JzL2JhY2tncm91bmQtYW5pbWF0b3IudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL2FuaW1hdG9ycy9jYW52YXMtZ3JpZC1hbmltYXRvci50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvbGliL2ltYWdlLWxvYWRlci50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL3Rvb2xzL2J1dHRvbi50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvY2lyY2xlLnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy9saW5lLnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy9tb3VzZS50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvcG9pbnQudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNhbnZhcyIsInRoaXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiY2xlYXIiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsIkNhbnZhc0FuaW1hdG9yIiwiZHJhdyIsIngiLCJ5IiwicmFkaXVzIiwiZmlsbFN0eWxlIiwic3Ryb2tlU3R5bGUiLCJ0bCIsInRyIiwiYnIiLCJibCIsInNhdmUiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJxdWFkcmF0aWNDdXJ2ZVRvIiwiY2xvc2VQYXRoIiwiZmlsbCIsInN0cm9rZSIsInJlc3RvcmUiLCJSb3VuZGVkUmVjdCIsIkZPTlRfRkFNSUxZIiwidGV4dCIsIm1heFdpZHRoIiwiZm9udCIsInRleHRBbGlnbiIsInRleHRCYXNlbGluZSIsIlRleHQiLCJnZXRGb250IiwiZmlsbFRleHQiLCJmb250U2l6ZSIsImlzSW50ZXJzZWN0IiwicG9zIiwicmVjdCIsIlJlY3QiLCJBbmltYXRvcnMiLCJJbWFnZUxvYWRlciIsImZpbGxSZWN0IiwiQmFja2dyb3VuZEFuaW1hdG9yIiwiZ3JpZCIsIk1hdGgiLCJyb3VuZCIsImNvbHMiLCJyb3dzIiwiQ2FudmFzR3JpZEFuaW1hdG9yIiwic291cmNlcyIsImNhbGxiYWNrIiwibG9hZGVkIiwiaW1hZ2VzIiwic3JjIiwidG90YWwiLCJJbWFnZSIsIm9uTG9hZCIsImhhc0ltYWdlIiwiaW1nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvcmRlcldpZHRoIiwiaG92ZXJTdHlsZSIsInRleHRTdHlsZSIsInN0YXRlIiwibGluZVdpZHRoIiwiQnV0dG9uIiwiY2VudGVyIiwiYXJjIiwiUEkiLCJDaXJjbGUiLCJzdGFydCIsImVuZCIsIkxpbmUiLCJhZGRDbGlja0V2ZW50TGlzdGVuZXIiLCJnZXRNb3VzZVBvcyIsIk1vdXNlIiwiaGFuZGxlciIsImUiLCJidXR0b25zIiwiZm9yRWFjaCIsImJ1dHRvbiIsImVuYWJsZWQiLCJvbkNsaWNrIiwidHlwZSIsImZ1bmN0aW9uIiwiYWRkSG92ZXJFdmVudExpc3RlbmVyIiwiaW50ZXJzZWN0Iiwib25Nb3VzZUVudGVyIiwidW5kZWZpbmVkIiwib25Nb3VzZUxlYXZlIiwic3R5bGUiLCJjdXJzb3IiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjbGllbnRYIiwibGVmdCIsInJpZ2h0IiwiY2xpZW50WSIsInRvcCIsImJvdHRvbSIsInoiLCJzcXVhcmVkRGlzdGFuY2UiLCJwMSIsInAyIiwicG93IiwiZGlzdGFuY2UiLCJzcXJ0Iiwic2NhbGUiLCJmYWN0b3IiLCJlcXVhbHMiLCJQb2ludCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxlQUFnQixHQUFJSCxHQUNELGlCQUFaQyxRQUNkQSxRQUFRLGdCQUFrQkQsSUFFMUJELEVBQUssZ0JBQWtCQyxJQVJ6QixDQVNHSyxRQUFRLFdBQ1gsTyxZQ1RFLElBQUlDLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVQLFFBR25DLElBQUlDLEVBQVNJLEVBQWlCRSxHQUFZLENBQ3pD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RUFBRy9GLElBQU1nRyxFQUFHaEcsR0FDWitGLEVBQUc5RixJQUFNK0YsRUFBRy9GLEdBQ1o4RixFQUFHRixJQUFNRyxFQUFHSCxJQXFCbEIsRUFoQ0EsR0FBYSxFQUFBVSIsImZpbGUiOiJjYW52YXMtdG9vbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImNhbnZhcy10b29sc1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJjYW52YXMtdG9vbHNcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiY2FudmFzLXRvb2xzXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgQ2FudmFzQW5pbWF0b3Ige1xuICBwcm90ZWN0ZWQgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIH1cbiAgcHVibGljIGFic3RyYWN0IGRyYXc6IChzdGF0ZT86IGFueSwgY3R4PzogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSA9PiB2b2lkO1xuICBwdWJsaWMgY2xlYXIoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSB0aGlzLmN0eCk6IHZvaWQge1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFJlY3QgfSBmcm9tICcuL3JlY3QnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJvdW5kZWRSZWN0UmFkaXVzIHtcbiAgdGw6IG51bWJlcjtcbiAgdHI6IG51bWJlcjtcbiAgYnI6IG51bWJlcjtcbiAgYmw6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSb3VuZGVkUmVjdCBleHRlbmRzIFJlY3Qge1xuICByYWRpdXM6IG51bWJlciB8IFJvdW5kZWRSZWN0UmFkaXVzO1xuICBmaWxsU3R5bGU/OiBzdHJpbmc7XG4gIHN0cm9rZVN0eWxlPzogc3RyaW5nO1xufVxuZXhwb3J0IGNsYXNzIFJvdW5kZWRSZWN0IHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG4gIHN0YXRpYyBkcmF3KFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIHsgeCwgeSwgd2lkdGgsIGhlaWdodCwgcmFkaXVzLCBmaWxsU3R5bGUsIHN0cm9rZVN0eWxlIH06IFJvdW5kZWRSZWN0XG4gICkge1xuICAgIGlmICh0eXBlb2YgcmFkaXVzID09PSAnbnVtYmVyJykge1xuICAgICAgcmFkaXVzID0ge1xuICAgICAgICB0bDogcmFkaXVzLFxuICAgICAgICB0cjogcmFkaXVzLFxuICAgICAgICBicjogcmFkaXVzLFxuICAgICAgICBibDogcmFkaXVzXG4gICAgICB9O1xuICAgIH1cblxuICAgIGN0eC5zYXZlKCk7XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbyh4ICsgcmFkaXVzLnRsLCB5KTtcbiAgICBjdHgubGluZVRvKHggKyB3aWR0aCAtIHJhZGl1cy50ciwgeSk7XG4gICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoLCB5LCB4ICsgd2lkdGgsIHkgKyByYWRpdXMudHIpO1xuICAgIGN0eC5saW5lVG8oeCArIHdpZHRoLCB5ICsgaGVpZ2h0IC0gcmFkaXVzLmJyKTtcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyhcbiAgICAgIHggKyB3aWR0aCxcbiAgICAgIHkgKyBoZWlnaHQsXG4gICAgICB4ICsgd2lkdGggLSByYWRpdXMuYnIsXG4gICAgICB5ICsgaGVpZ2h0XG4gICAgKTtcbiAgICBjdHgubGluZVRvKHggKyByYWRpdXMuYmwsIHkgKyBoZWlnaHQpO1xuICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHkgKyBoZWlnaHQsIHgsIHkgKyBoZWlnaHQgLSByYWRpdXMuYmwpO1xuICAgIGN0eC5saW5lVG8oeCwgeSArIHJhZGl1cy50bCk7XG4gICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSwgeCArIHJhZGl1cy50bCwgeSk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuXG4gICAgaWYgKGZpbGxTdHlsZSkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcbiAgICAgIGN0eC5maWxsKCk7XG4gICAgfVxuICAgIGlmIChzdHJva2VTdHlsZSkge1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3R5bGU7XG4gICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBUZXh0Qm94IHtcbiAgdGV4dDogc3RyaW5nO1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbiAgbWF4V2lkdGg/OiBudW1iZXI7XG4gIGZvbnQ6IHN0cmluZyB8IG51bWJlcjtcbiAgZmlsbFN0eWxlOiBzdHJpbmc7XG4gIHRleHRBbGlnbj86IENhbnZhc1RleHRBbGlnbjtcbiAgdGV4dEJhc2VsaW5lPzogQ2FudmFzVGV4dEJhc2VsaW5lO1xufVxuZXhwb3J0IGNsYXNzIFRleHQge1xuICBzdGF0aWMgRk9OVF9GQU1JTFkgPVxuICAgICdNb250c2VycmF0LCAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsIFwiU2Vnb2UgVUlcIiwgUm9ib3RvLCBcIkhlbHZldGljYSBOZXVlXCIsIEFyaWFsLCBzYW5zLXNlcmlmLCBcIkFwcGxlIENvbG9yIEVtb2ppXCIsIFwiU2Vnb2UgVUkgRW1vamlcIiwgXCJTZWdvZSBVSSBTeW1ib2xcIic7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICBzdGF0aWMgZHJhdyA9IChcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICB7XG4gICAgICB0ZXh0LFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICBtYXhXaWR0aCxcbiAgICAgIGZvbnQsXG4gICAgICBmaWxsU3R5bGUsXG4gICAgICB0ZXh0QWxpZ24gPSAnY2VudGVyJyxcbiAgICAgIHRleHRCYXNlbGluZSA9ICdtaWRkbGUnXG4gICAgfTogVGV4dEJveFxuICApID0+IHtcbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcbiAgICBpZiAodHlwZW9mIGZvbnQgPT09ICdudW1iZXInKSB7XG4gICAgICBmb250ID0gVGV4dC5nZXRGb250KGZvbnQpO1xuICAgIH1cbiAgICBjdHguZm9udCA9IGZvbnQ7XG4gICAgY3R4LnRleHRBbGlnbiA9IHRleHRBbGlnbjtcbiAgICBjdHgudGV4dEJhc2VsaW5lID0gdGV4dEJhc2VsaW5lO1xuICAgIGN0eC5maWxsVGV4dCh0ZXh0LCB4LCB5LCBtYXhXaWR0aCk7XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9O1xuICBzdGF0aWMgZ2V0Rm9udCA9IChmb250U2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgcmV0dXJuIGZvbnRTaXplICsgJ3B4ICcgKyBUZXh0LkZPTlRfRkFNSUxZO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuL3BvaW50JztcblxuZXhwb3J0IGludGVyZmFjZSBSZWN0IHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgUmVjdCB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICBzdGF0aWMgaXNJbnRlcnNlY3QgPSAocG9zOiBQb2ludCwgcmVjdDogUmVjdCkgPT5cbiAgICBwb3MueCA+IHJlY3QueCAmJlxuICAgIHBvcy54IDwgcmVjdC54ICsgcmVjdC53aWR0aCAmJlxuICAgIHBvcy55IDwgcmVjdC55ICsgcmVjdC5oZWlnaHQgJiZcbiAgICBwb3MueSA+IHJlY3QueTtcbn1cbiIsImltcG9ydCAqIGFzIEFuaW1hdG9ycyBmcm9tICcuL2FuaW1hdG9ycy9pbmRleCc7XG5pbXBvcnQgeyBJbWFnZUxvYWRlciB9IGZyb20gJy4vbGliL2ltYWdlLWxvYWRlcic7XG4vLyBpbXBvcnQgKiBhcyBTaGFwZXMgZnJvbSAnLi90b29scy9pbmRleCc7XG5cbmV4cG9ydCB7IEFuaW1hdG9ycywgSW1hZ2VMb2FkZXIgfTtcbmV4cG9ydCAqIGZyb20gJy4vdG9vbHMvaW5kZXgnO1xuIiwiZXhwb3J0ICogZnJvbSAnLi9iYWNrZ3JvdW5kLWFuaW1hdG9yJztcbmV4cG9ydCAqIGZyb20gJy4vY2FudmFzLWFuaW1hdG9yJztcbmV4cG9ydCAqIGZyb20gJy4vY2FudmFzLWdyaWQtYW5pbWF0b3InO1xuIiwiaW1wb3J0IHsgQ2FudmFzQW5pbWF0b3IgfSBmcm9tICcuL2NhbnZhcy1hbmltYXRvcic7XG5cbmV4cG9ydCBjbGFzcyBCYWNrZ3JvdW5kQW5pbWF0b3IgZXh0ZW5kcyBDYW52YXNBbmltYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIHB1YmxpYyBmaWxsU3R5bGU6IHN0cmluZyA9ICcjMjMyMzIzJykge1xuICAgIHN1cGVyKGNhbnZhcyk7XG4gIH1cbiAgcHVibGljIGRyYXcgPSAoXG4gICAgZmlsbFN0eWxlID0gdGhpcy5maWxsU3R5bGUsXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSB0aGlzLmN0eFxuICApID0+IHtcbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgQ2FudmFzQW5pbWF0b3IgfSBmcm9tICcuL2NhbnZhcy1hbmltYXRvcic7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDYW52YXNHcmlkQW5pbWF0b3IgZXh0ZW5kcyBDYW52YXNBbmltYXRvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LFxuICAgIHByb3RlY3RlZCBncmlkOiB7IGNvbHM6IG51bWJlcjsgcm93czogbnVtYmVyIH1cbiAgKSB7XG4gICAgc3VwZXIoY2FudmFzKTtcbiAgfVxuICBwcm90ZWN0ZWQgeCh4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKCh4ICogdGhpcy5jYW52YXMud2lkdGgpIC8gdGhpcy5ncmlkLmNvbHMpO1xuICB9XG4gIHByb3RlY3RlZCB5KHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoKHkgKiB0aGlzLmNhbnZhcy5oZWlnaHQpIC8gdGhpcy5ncmlkLnJvd3MpO1xuICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEltYWdlU2V0IHtcbiAgW2tleTogc3RyaW5nXTogSFRNTEltYWdlRWxlbWVudDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VTb3VyY2VTZXQge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59XG5leHBvcnQgY2xhc3MgSW1hZ2VMb2FkZXIge1xuICBwcml2YXRlIGxvYWRlZCA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgdG90YWw6IG51bWJlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBpbWFnZXM6IEltYWdlU2V0ID0ge307XG4gIGNvbnN0cnVjdG9yKFxuICAgIHNvdXJjZXM6IEltYWdlU291cmNlU2V0LFxuICAgIGNhbGxiYWNrOiAoaW1hZ2VzOiBJbWFnZVNldCkgPT4gdm9pZCA9ICgpID0+IHt9XG4gICkge1xuICAgIGxldCB0ID0gMDtcbiAgICBmb3IgKGNvbnN0IHNyYyBpbiBzb3VyY2VzKSB7XG4gICAgICBpZiAoc291cmNlcy5oYXNPd25Qcm9wZXJ0eShzcmMpKSB7XG4gICAgICAgIHQrKztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy50b3RhbCA9IHQ7XG5cbiAgICBmb3IgKGNvbnN0IHNyYyBpbiBzb3VyY2VzKSB7XG4gICAgICBpZiAoc291cmNlcy5oYXNPd25Qcm9wZXJ0eShzcmMpKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VzW3NyY10gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgdGhpcy5pbWFnZXNbc3JjXS5zcmMgPSBzb3VyY2VzW3NyY107XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5vbkxvYWQoY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGljIGhhc0ltYWdlKGltZzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VzW2ltZ10gIT0gbnVsbDtcbiAgfVxuICBwdWJsaWMgb25Mb2FkKGNhbGxiYWNrOiAoaW1hZ2VzOiBJbWFnZVNldCkgPT4gdm9pZCkge1xuICAgIGZvciAoY29uc3QgaW1nIGluIHRoaXMuaW1hZ2VzKSB7XG4gICAgICBpZiAodGhpcy5pbWFnZXMuaGFzT3duUHJvcGVydHkoaW1nKSkge1xuICAgICAgICBpZiAodGhpcy5sb2FkZWQgPCB0aGlzLnRvdGFsKSB7XG4gICAgICAgICAgdGhpcy5pbWFnZXNbaW1nXS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ2xvYWQnLFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoKyt0aGlzLmxvYWRlZCA+PSB0aGlzLnRvdGFsKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5pbWFnZXMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKHRoaXMuaW1hZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0ICogZnJvbSAnLi9idXR0b24nO1xuZXhwb3J0ICogZnJvbSAnLi9jaXJjbGUnO1xuZXhwb3J0ICogZnJvbSAnLi9saW5lJztcbmV4cG9ydCAqIGZyb20gJy4vbW91c2UnO1xuZXhwb3J0ICogZnJvbSAnLi9wb2ludCc7XG5leHBvcnQgKiBmcm9tICcuL3JlY3QnO1xuZXhwb3J0ICogZnJvbSAnLi9yb3VuZGVkLXJlY3QnO1xuZXhwb3J0ICogZnJvbSAnLi90ZXh0JztcbiIsImltcG9ydCB7XG4gIENsaWNrRXZlbnRPYmplY3QsXG4gIEhvdmVyRXZlbnRPYmplY3QsXG4gIE1vdXNlRXZlbnRMaXN0ZW5lclxufSBmcm9tICcuL21vdXNlJztcbmltcG9ydCB7IFJvdW5kZWRSZWN0IH0gZnJvbSAnLi9yb3VuZGVkLXJlY3QnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4vdGV4dCc7XG5leHBvcnQgaW50ZXJmYWNlIEJ1dHRvbiBleHRlbmRzIFJvdW5kZWRSZWN0LCBDbGlja0V2ZW50T2JqZWN0LCBIb3ZlckV2ZW50T2JqZWN0IHtcbiAgYm9yZGVyV2lkdGg/OiBudW1iZXI7XG4gIGhvdmVyU3R5bGU/OiBzdHJpbmc7XG4gIHRleHQ6IHN0cmluZztcbiAgZm9udDogc3RyaW5nIHwgbnVtYmVyO1xuICB0ZXh0U3R5bGU6IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xufVxuZXhwb3J0IGNsYXNzIEJ1dHRvbiB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGN0eCAtIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRFxuICAgKiBAcGFyYW0gYnV0dG9uIC0gQnV0dG9uXG4gICAqL1xuICBzdGF0aWMgZHJhdyhcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICB7XG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgcmFkaXVzLFxuICAgICAgZmlsbFN0eWxlLFxuICAgICAgc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwKScsXG4gICAgICBib3JkZXJXaWR0aCA9IE1hdGgubWluKDQsICh3aWR0aCAvIDM2KSAqIDQpLFxuICAgICAgaG92ZXJTdHlsZSxcbiAgICAgIHRleHQsXG4gICAgICBmb250LFxuICAgICAgdGV4dFN0eWxlLFxuICAgICAgc3RhdGVcbiAgICB9OiBCdXR0b25cbiAgKSB7XG4gICAgY3R4LnNhdmUoKTtcblxuICAgIGlmIChzdGF0ZSA9PT0gJ2hvdmVyJyAmJiBob3ZlclN0eWxlKSB7XG4gICAgICBmaWxsU3R5bGUgPSBob3ZlclN0eWxlO1xuICAgIH0gZWxzZSBpZiAoZmlsbFN0eWxlKSB7XG4gICAgICBmaWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgfVxuXG4gICAgY3R4LmxpbmVXaWR0aCA9IGJvcmRlcldpZHRoO1xuXG4gICAgaWYgKHN0YXRlID09PSAnaG92ZXInICYmIGhvdmVyU3R5bGUpIHtcbiAgICAgIHN0cm9rZVN0eWxlID0gaG92ZXJTdHlsZTtcbiAgICB9IGVsc2UgaWYgKHN0cm9rZVN0eWxlKSB7XG4gICAgICBzdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xuICAgIH1cblxuICAgIFJvdW5kZWRSZWN0LmRyYXcoY3R4LCB7XG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgcmFkaXVzLFxuICAgICAgZmlsbFN0eWxlLFxuICAgICAgc3Ryb2tlU3R5bGVcbiAgICB9KTtcblxuICAgIFRleHQuZHJhdyhjdHgsIHtcbiAgICAgIHRleHQsXG4gICAgICB4OiB4ICsgd2lkdGggLyAyLFxuICAgICAgeTogeSArIGhlaWdodCAvIDIsXG4gICAgICBtYXhXaWR0aDogd2lkdGggKiAwLjksXG4gICAgICBmb250LFxuICAgICAgZmlsbFN0eWxlOiB0eXBlb2YgdGV4dFN0eWxlID09PSAnc3RyaW5nJyA/IHRleHRTdHlsZSA6IHRleHRTdHlsZSgpXG4gICAgfSk7XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb2ludCB9IGZyb20gJy4vcG9pbnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENpcmNsZSB7XG4gIGNlbnRlcjogUG9pbnQ7XG4gIHJhZGl1czogbnVtYmVyO1xuICBmaWxsU3R5bGU/OiBzdHJpbmc7XG4gIHN0cm9rZVN0eWxlPzogc3RyaW5nO1xufVxuZXhwb3J0IGNsYXNzIENpcmNsZSB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICBzdGF0aWMgY3JlYXRlKHg6IG51bWJlciwgeTogbnVtYmVyLCByYWRpdXM6IG51bWJlcik6IENpcmNsZSB7XG4gICAgY29uc3QgY2VudGVyID0geyB4LCB5IH07XG4gICAgcmV0dXJuIHsgY2VudGVyLCByYWRpdXMgfTtcbiAgfVxuICAvKipcbiAgICogRHJhd3MgYSBjaXJjbGVcbiAgICogQHBhcmFtIGN0eCAtIHRoZSBjYW52YXMgcmVuZGVyaW5nIGNvbnRleHRcbiAgICogQHBhcmFtIGNpcmNsZSAtIHRoZSBjaXJjbGUgdG8gZHJhd1xuICAgKiBAcGFyYW0gZmlsbFN0eWxlIC0gdGhlIHN0eWxlIHRvIGZpbGwgdGhlIGNpcmNsZVxuICAgKiBAcGFyYW0gc3Ryb2tlU3R5bGUgLSB0aGUgc3R5bGUgdG8gc3Ryb2tlIHRoZSBjaXJjbGVcbiAgICovXG4gIHN0YXRpYyBkcmF3KFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIHsgY2VudGVyLCByYWRpdXMsIGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUgfTogQ2lyY2xlXG4gICkge1xuICAgIGN0eC5zYXZlKCk7XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LmFyYyhjZW50ZXIueCwgY2VudGVyLnksIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcblxuICAgIGlmIChmaWxsU3R5bGUpIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgICBjdHguZmlsbCgpO1xuICAgIH1cblxuICAgIGlmIChzdHJva2VTdHlsZSkge1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3R5bGU7XG4gICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuL3BvaW50JztcblxuZXhwb3J0IGludGVyZmFjZSBMaW5lIHtcbiAgc3RhcnQ6IFBvaW50O1xuICBlbmQ6IFBvaW50O1xufVxuXG5leHBvcnQgY2xhc3MgTGluZSB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICBzdGF0aWMgZHJhdyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeyBzdGFydCwgZW5kIH06IExpbmUpID0+IHtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbyhzdGFydC54LCBzdGFydC55KTtcbiAgICBjdHgubGluZVRvKGVuZC54LCBlbmQueSk7XG4gICAgY3R4LnN0cm9rZSgpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IFJlY3QgfSBmcm9tICcuL3JlY3QnO1xuXG5leHBvcnQgdHlwZSBNb3VzZUV2ZW50TGlzdGVuZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IGFueTtcbmV4cG9ydCBpbnRlcmZhY2UgQ2xpY2tFdmVudE9iamVjdCBleHRlbmRzIFJlY3Qge1xuICBlbmFibGVkOiBib29sZWFuO1xuICBvbkNsaWNrOiBNb3VzZUV2ZW50TGlzdGVuZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIEhvdmVyRXZlbnRPYmplY3QgZXh0ZW5kcyBSZWN0IHtcbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgc3RhdGU/OiAnaG92ZXInO1xuICBvbk1vdXNlRW50ZXI/OiBNb3VzZUV2ZW50TGlzdGVuZXI7XG4gIG9uTW91c2VMZWF2ZT86IE1vdXNlRXZlbnRMaXN0ZW5lcjtcbn1cbmV4cG9ydCBjbGFzcyBNb3VzZSB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICBzdGF0aWMgYWRkQ2xpY2tFdmVudExpc3RlbmVyID0gKFxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsXG4gICAgLi4uYnV0dG9uczogQ2xpY2tFdmVudE9iamVjdFtdXG4gICkgPT4ge1xuICAgIGNvbnN0IGdldE1vdXNlUG9zID0gTW91c2UuZ2V0TW91c2VQb3MoY2FudmFzKTtcblxuICAgIGNvbnN0IGhhbmRsZXIgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgY29uc3QgcG9zID0gZ2V0TW91c2VQb3MoZSk7XG4gICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgaWYgKGJ1dHRvbi5lbmFibGVkICYmIFJlY3QuaXNJbnRlcnNlY3QocG9zLCBidXR0b24pKSB7XG4gICAgICAgICAgLy8gY2xpY2sgZXZlbnRcbiAgICAgICAgICBidXR0b24ub25DbGljayhlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuXG4gICAgcmV0dXJuIHsgdHlwZTogJ2NsaWNrJywgZnVuY3Rpb246IGhhbmRsZXIgfSBhcyB7XG4gICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICBmdW5jdGlvbjogTW91c2VFdmVudExpc3RlbmVyO1xuICAgIH07XG4gIH07XG4gIHN0YXRpYyBhZGRIb3ZlckV2ZW50TGlzdGVuZXIgPSAoXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCxcbiAgICAuLi5idXR0b25zOiBIb3ZlckV2ZW50T2JqZWN0W11cbiAgKSA9PiB7XG4gICAgY29uc3QgZ2V0TW91c2VQb3MgPSBNb3VzZS5nZXRNb3VzZVBvcyhjYW52YXMpO1xuXG4gICAgY29uc3QgaGFuZGxlciA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBwb3MgPSBnZXRNb3VzZVBvcyhlKTtcbiAgICAgIGxldCBpbnRlcnNlY3QgPSBmYWxzZTtcbiAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICBpZiAoYnV0dG9uLmVuYWJsZWQgJiYgUmVjdC5pc0ludGVyc2VjdChwb3MsIGJ1dHRvbikpIHtcbiAgICAgICAgICAvLyBob3ZlciBldmVudFxuICAgICAgICAgIGlmIChidXR0b24uc3RhdGUgIT09ICdob3ZlcicpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5zdGF0ZSA9ICdob3Zlcic7XG4gICAgICAgICAgICBpZiAoYnV0dG9uLm9uTW91c2VFbnRlcikge1xuICAgICAgICAgICAgICBidXR0b24ub25Nb3VzZUVudGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpbnRlcnNlY3QgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvbi5zdGF0ZSA9PT0gJ2hvdmVyJykge1xuICAgICAgICAgIGJ1dHRvbi5zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoYnV0dG9uLm9uTW91c2VMZWF2ZSkge1xuICAgICAgICAgICAgYnV0dG9uLm9uTW91c2VMZWF2ZShlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY2FudmFzLnN0eWxlLmN1cnNvciA9IGludGVyc2VjdCA/ICdwb2ludGVyJyA6ICdkZWZhdWx0JztcbiAgICB9O1xuXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZXIpO1xuXG4gICAgcmV0dXJuIHsgdHlwZTogJ21vdXNlbW92ZScsIGZ1bmN0aW9uOiBoYW5kbGVyIH0gYXMge1xuICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgZnVuY3Rpb246IE1vdXNlRXZlbnRMaXN0ZW5lcjtcbiAgICB9O1xuICB9O1xuICBzdGF0aWMgZ2V0TW91c2VQb3MgPSAoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkgPT4gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiB7XG4gICAgICB4OiAoKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkpICogY2FudmFzLndpZHRoLFxuICAgICAgeTogKChlLmNsaWVudFkgLSByZWN0LnRvcCkgLyAocmVjdC5ib3R0b20gLSByZWN0LnRvcCkpICogY2FudmFzLmhlaWdodFxuICAgIH07XG4gIH07XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIFBvaW50IHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIHo/OiBudW1iZXI7XG59XG5leHBvcnQgY2xhc3MgUG9pbnQge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbiAgc3RhdGljIGNyZWF0ZSh4OiBudW1iZXIsIHk6IG51bWJlciwgej86IG51bWJlcik6IFBvaW50IHtcbiAgICByZXR1cm4geyB4OiB4LCB5OiB5LCB6OiB6IH07XG4gIH1cbiAgc3RhdGljIGVxdWFscyA9IChwMTogUG9pbnQpID0+IChwMjogUG9pbnQpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgcDEgIT0gbnVsbCAmJlxuICAgICAgcDIgIT0gbnVsbCAmJlxuICAgICAgcDEueCA9PT0gcDIueCAmJlxuICAgICAgcDEueSA9PT0gcDIueSAmJlxuICAgICAgcDEueiA9PT0gcDIuelxuICAgICk7XG4gIH07XG4gIHN0YXRpYyBzcXVhcmVkRGlzdGFuY2UocDE6IFBvaW50LCBwMjogUG9pbnQpOiBudW1iZXIge1xuICAgIHJldHVybiAoXG4gICAgICBNYXRoLnBvdyhwMi54IC0gcDEueCwgMikgK1xuICAgICAgTWF0aC5wb3cocDIueSAtIHAxLnksIDIpICtcbiAgICAgIChwMS56ICE9PSB1bmRlZmluZWQgJiYgcDIueiAhPT0gdW5kZWZpbmVkID8gTWF0aC5wb3cocDIueiAtIHAxLnosIDIpIDogMClcbiAgICApO1xuICB9XG4gIHN0YXRpYyBkaXN0YW5jZShwMTogUG9pbnQsIHAyOiBQb2ludCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnNxdWFyZWREaXN0YW5jZShwMSwgcDIpKTtcbiAgfVxuICBzdGF0aWMgc2NhbGUoZmFjdG9yOiBudW1iZXIsIHA6IFBvaW50KTogUG9pbnQge1xuICAgIHAueCAqPSBmYWN0b3I7XG4gICAgcC55ICo9IGZhY3RvcjtcbiAgICBpZiAocC56ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHAueiAqPSBmYWN0b3I7XG4gICAgfVxuICAgIHJldHVybiBwO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9