!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("canvas-tools",[],e):"object"==typeof exports?exports["canvas-tools"]=e():t["canvas-tools"]=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=this;void 0===e&&(e=30),this.canvas=t,this.fps=e,this.update=function(t){return function(e){e-t>1e3/n.fps?(n.draw(),n.animationFrameId=window.requestAnimationFrame(n.update(e))):n.animationFrameId=window.requestAnimationFrame(n.update(t))}},this.ctx=t.getContext("2d"),setTimeout((function(){n.setup()}),0),window.requestAnimationFrame(this.update(0))}return t.prototype.clear=function(t){void 0===t&&(t=this.ctx),t.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.destroy=function(){this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId)},t}();e.CanvasAnimator=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.draw=function(t,e){var n=e.x,o=e.y,r=e.width,i=e.height,a=e.radius,u=e.fillStyle,s=e.strokeStyle;"number"==typeof a&&(a={tl:a,tr:a,br:a,bl:a}),t.save(),t.beginPath(),t.moveTo(n+a.tl,o),t.lineTo(n+r-a.tr,o),t.quadraticCurveTo(n+r,o,n+r,o+a.tr),t.lineTo(n+r,o+i-a.br),t.quadraticCurveTo(n+r,o+i,n+r-a.br,o+i),t.lineTo(n+a.bl,o+i),t.quadraticCurveTo(n,o+i,n,o+i-a.bl),t.lineTo(n,o+a.tl),t.quadraticCurveTo(n,o,n+a.tl,o),t.closePath(),u&&(t.fillStyle=u,t.fill()),s&&(t.strokeStyle=s,t.stroke()),t.restore()},t}();e.RoundedRect=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.FONT_FAMILY='Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',t.draw=function(e,n){var o=n.text,r=n.x,i=n.y,a=n.maxWidth,u=n.font,s=n.fillStyle,c=n.strokeStyle,l=n.textAlign,f=void 0===l?"center":l,d=n.textBaseline,v=void 0===d?"middle":d;e.save(),"number"==typeof u&&(u=t.getFont(u)),e.font=u,e.textAlign=f,e.textBaseline=v,s||c||(s="black"),s&&(e.fillStyle=s,e.fillText(o,r,i,a)),c&&(e.strokeStyle=c,e.strokeText(o,r,i,a)),e.restore()},t.getFont=function(e){return e+"px "+t.FONT_FAMILY},t}();e.Text=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.contains=function(t,e){return t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y},t.intersects=function(t,e){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+t.height||t.y+t.height<e.y)},t}();e.Rect=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5);e.Animators=o;var r=n(8);e.ImageLoader=r.ImageLoader,function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(9))},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(6)),o(n(0)),o(n(7)),e.createCanvasElement=function(t,e,n){var o,r;void 0===e&&(e=600),void 0===n&&(n=600);var i=document.createElement("canvas");i.width=e,i.height=n,i.style.cssText="width: 100%;";var a=document.getElementById(t);return(null===(o=a)||void 0===o?void 0:o.innerHTML)&&(a.innerHTML=""),null===(r=a)||void 0===r||r.append(i),i}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){void 0===n&&(n="#232323");var o=t.call(this,e)||this;return o.fillStyle=n,o.draw=function(t,e){void 0===t&&(t=o.fillStyle),void 0===e&&(e=o.ctx),e.save(),e.fillStyle=t,e.fillRect(0,0,o.canvas.width,o.canvas.height),e.restore()},o.update=function(t){return function(t){o.draw()}},o}return r(e,t),e.prototype.setup=function(){},e}(n(0).CanvasAnimator);e.BackgroundAnimator=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.canvas=e,o.grid=n,o}return r(e,t),e.prototype.x=function(t){return Math.round(t*this.canvas.width/this.grid.cols)},e.prototype.y=function(t){return Math.round(t*this.canvas.height/this.grid.rows)},e}(n(0).CanvasAnimator);e.CanvasGridAnimator=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){void 0===e&&(e=function(){}),this.loaded=0,this.images={};var n=0;for(var o in t)t.hasOwnProperty(o)&&n++;for(var o in this.total=n,t)t.hasOwnProperty(o)&&(this.images[o]=new Image,this.images[o].src=t[o]);this.onLoad(e)}return t.prototype.hasImage=function(t){return null!=this.images[t]},t.prototype.onLoad=function(t){var e=this;for(var n in this.images)this.images.hasOwnProperty(n)&&(this.loaded<this.total?this.images[n].addEventListener("load",(function(){++e.loaded>=e.total&&t(e.images)}),!1):t(this.images))},t}();e.ImageLoader=o},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(10)),o(n(11)),o(n(12)),o(n(13)),o(n(14)),o(n(15)),o(n(3)),o(n(1)),o(n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(2),i=function(){function t(){}return t.draw=function(t,e){var n=e.x,i=e.y,a=e.width,u=e.height,s=e.radius,c=e.fillStyle,l=e.strokeStyle,f=void 0===l?"rgba(255,255,255,0)":l,d=e.borderWidth,v=void 0===d?Math.min(4,a/36*4):d,h=e.hoverStyle,y=e.text,p=e.font,m=e.textStyle,g=e.state;t.save(),"hover"===g&&h?c=h:c&&(c=c),t.lineWidth=v,"hover"===g&&h?f=h:f&&(f=f),o.RoundedRect.draw(t,{x:n,y:i,width:a,height:u,radius:s,fillStyle:c,strokeStyle:f}),r.Text.draw(t,{text:y,x:n+a/2,y:i+u/2,maxWidth:.9*a,font:p,fillStyle:"string"==typeof m?m:m()}),t.restore()},t}();e.Button=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.create=function(t,e,n){return{center:{x:t,y:e},radius:n}},t.draw=function(t,e){var n=e.center,o=e.radius,r=e.fillStyle,i=e.strokeStyle;t.save(),t.beginPath(),t.arc(n.x,n.y,o,0,2*Math.PI),t.closePath(),r&&(t.fillStyle=r,t.fill()),i&&(t.strokeStyle=i,t.stroke()),t.restore()},t}();e.Circle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.getPixel=function(t,e,n){var o=t.getImageData(e,n,1,1).data;return{position:{x:e,y:n},color:{r:o[0],g:o[1],b:o[2],a:o[3]}}},t.getCanvasPixels=function(t){for(var e=t.getContext("2d").getImageData(0,0,t.width,t.height).data,n=[],o=0;o<e.length;o+=4){var r=Math.floor(o/4);e[o+3]>0&&n.push({position:{x:r%t.width,y:Math.floor(r/t.width)},color:{r:e[o],g:e[o+1],b:e[o+2],a:e[o+3]}})}return n},t}();e.Image=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.draw=function(t,e){var n=e.start,o=e.end;t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),t.stroke(),t.closePath()},t}();e.Line=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=function(){function t(){}return t.addClickEventListener=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t.getMousePos(e),a=function(t){var e=i(t);n.forEach((function(n){n.enabled&&o.Rect.contains(e,n)&&n.onClick(t)}))};return e.addEventListener("click",a),{type:"click",function:a}},t.addHoverEventListener=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t.getMousePos(e),a=function(t){var r=i(t),a=!1;n.forEach((function(e){e.enabled&&o.Rect.contains(r,e)?("hover"!==e.state&&(e.state="hover",e.onMouseEnter&&e.onMouseEnter(t)),a=!0):"hover"===e.state&&(e.state=void 0,e.onMouseLeave&&e.onMouseLeave(t))})),e.style.cursor=a?"pointer":"default"};return e.addEventListener("mousemove",a),{type:"mousemove",function:a}},t.getMousePos=function(t){return function(e){var n=t.getBoundingClientRect();return{x:(e.clientX-n.left)/(n.right-n.left)*t.width,y:(e.clientY-n.top)/(n.bottom-n.top)*t.height}}},t}();e.Mouse=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.create=function(t,e,n){return{x:t,y:e,z:n}},t.squaredDistance=function(t,e){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+(void 0!==t.z&&void 0!==e.z?Math.pow(e.z-t.z,2):0)},t.distance=function(t,e){return Math.sqrt(this.squaredDistance(t,e))},t.scale=function(t,e){return e.x*=t,e.y*=t,void 0!==e.z&&(e.z*=t),e},t.equals=function(t){return function(e){return null!=t&&null!=e&&t.x===e.x&&t.y===e.y&&t.z===e.z}},t}();e.Point=o}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2NhbnZhcy10b29scy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvYW5pbWF0b3JzL2NhbnZhcy1hbmltYXRvci50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvcm91bmRlZC1yZWN0LnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy90ZXh0LnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy9yZWN0LnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy9jYW52YXMtdG9vbHMudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL2FuaW1hdG9ycy9pbmRleC50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvYW5pbWF0b3JzL2JhY2tncm91bmQtYW5pbWF0b3IudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL2FuaW1hdG9ycy9jYW52YXMtZ3JpZC1hbmltYXRvci50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvbGliL2ltYWdlLWxvYWRlci50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL3Rvb2xzL2J1dHRvbi50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvY2lyY2xlLnRzIiwid2VicGFjazovL2NhbnZhcy10b29scy8uL3NyYy90b29scy9pbWFnZS50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvbGluZS50cyIsIndlYnBhY2s6Ly9jYW52YXMtdG9vbHMvLi9zcmMvdG9vbHMvbW91c2UudHMiLCJ3ZWJwYWNrOi8vY2FudmFzLXRvb2xzLy4vc3JjL3Rvb2xzL3BvaW50LnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjYW52YXMiLCJmcHMiLCJ1cGRhdGUiLCJ0MSIsInQyIiwiZHJhdyIsImFuaW1hdGlvbkZyYW1lSWQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0aGlzIiwiY3R4IiwiZ2V0Q29udGV4dCIsInNldFRpbWVvdXQiLCJzZXR1cCIsImNsZWFyIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJkZXN0cm95IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJDYW52YXNBbmltYXRvciIsIngiLCJ5IiwicmFkaXVzIiwiZmlsbFN0eWxlIiwic3Ryb2tlU3R5bGUiLCJ0bCIsInRyIiwiYnIiLCJibCIsInNhdmUiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJxdWFkcmF0aWNDdXJ2ZVRvIiwiY2xvc2VQYXRoIiwiZmlsbCIsInN0cm9rZSIsInJlc3RvcmUiLCJSb3VuZGVkUmVjdCIsIkZPTlRfRkFNSUxZIiwidGV4dCIsIm1heFdpZHRoIiwiZm9udCIsInRleHRBbGlnbiIsInRleHRCYXNlbGluZSIsIlRleHQiLCJnZXRGb250IiwiZmlsbFRleHQiLCJzdHJva2VUZXh0IiwiZm9udFNpemUiLCJjb250YWlucyIsInBvcyIsInJlY3QiLCJpbnRlcnNlY3RzIiwicmFuZ2UiLCJyZWN0MiIsIlJlY3QiLCJBbmltYXRvcnMiLCJJbWFnZUxvYWRlciIsImNvbnRhaW5lcklkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJjc3NUZXh0IiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJhcHBlbmQiLCJmaWxsUmVjdCIsIkJhY2tncm91bmRBbmltYXRvciIsImdyaWQiLCJNYXRoIiwicm91bmQiLCJjb2xzIiwicm93cyIsIkNhbnZhc0dyaWRBbmltYXRvciIsInNvdXJjZXMiLCJjYWxsYmFjayIsImxvYWRlZCIsImltYWdlcyIsInNyYyIsInRvdGFsIiwiSW1hZ2UiLCJvbkxvYWQiLCJoYXNJbWFnZSIsImltZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJib3JkZXJXaWR0aCIsImhvdmVyU3R5bGUiLCJ0ZXh0U3R5bGUiLCJzdGF0ZSIsImxpbmVXaWR0aCIsIkJ1dHRvbiIsImNlbnRlciIsImFyYyIsIlBJIiwiQ2lyY2xlIiwiZ2V0UGl4ZWwiLCJkYXRhIiwiZ2V0SW1hZ2VEYXRhIiwicG9zaXRpb24iLCJjb2xvciIsImciLCJiIiwiYSIsImdldENhbnZhc1BpeGVscyIsInJnYmEiLCJsZW5ndGgiLCJwaXhlbCIsImZsb29yIiwicHVzaCIsInN0YXJ0IiwiZW5kIiwiTGluZSIsImFkZENsaWNrRXZlbnRMaXN0ZW5lciIsImdldE1vdXNlUG9zIiwiTW91c2UiLCJoYW5kbGVyIiwiZSIsImJ1dHRvbnMiLCJmb3JFYWNoIiwiYnV0dG9uIiwiZW5hYmxlZCIsIm9uQ2xpY2siLCJ0eXBlIiwiZnVuY3Rpb24iLCJhZGRIb3ZlckV2ZW50TGlzdGVuZXIiLCJpbnRlcnNlY3QiLCJvbk1vdXNlRW50ZXIiLCJ1bmRlZmluZWQiLCJvbk1vdXNlTGVhdmUiLCJjdXJzb3IiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjbGllbnRYIiwibGVmdCIsInJpZ2h0IiwiY2xpZW50WSIsInRvcCIsImJvdHRvbSIsInoiLCJzcXVhcmVkRGlzdGFuY2UiLCJwMSIsInAyIiwicG93IiwiZGlzdGFuY2UiLCJzcXJ0Iiwic2NhbGUiLCJmYWN0b3IiLCJlcXVhbHMiLCJQb2ludCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxlQUFnQixHQUFJSCxHQUNELGlCQUFaQyxRQUNkQSxRQUFRLGdCQUFrQkQsSUFFMUJELEVBQUssZ0JBQWtCQyxJQVJ6QixDQVNHSyxRQUFRLFdBQ1gsTyxZQ1RFLElBQUlDLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVQLFFBR25DLElBQUlDLEVBQVNJLEVBQWlCRSxHQUFZLENBQ3pDQyxFQUFHRCxFQUNIRSxHQUFHLEVBQ0hULFFBQVMsSUFVVixPQU5BVSxFQUFRSCxHQUFVSSxLQUFLVixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTTSxHQUcvREwsRUFBT1EsR0FBSSxFQUdKUixFQUFPRCxRQTBEZixPQXJEQU0sRUFBb0JNLEVBQUlGLEVBR3hCSixFQUFvQk8sRUFBSVIsRUFHeEJDLEVBQW9CUSxFQUFJLFNBQVNkLEVBQVNlLEVBQU1DLEdBQzNDVixFQUFvQlcsRUFBRWpCLEVBQVNlLElBQ2xDRyxPQUFPQyxlQUFlbkIsRUFBU2UsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFVixFQUFvQmdCLEVBQUksU0FBU3RCLEdBQ1gsb0JBQVh1QixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWVuQixFQUFTdUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlbkIsRUFBUyxhQUFjLENBQUV5QixPQUFPLEtBUXZEbkIsRUFBb0JvQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUs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SCxFQUFHLFNBQ1o0RyxJQUFUWSxFQUFHRixRQUE0QlYsSUFBVGEsRUFBR0gsRUFBa0JwRSxLQUFLd0UsSUFBSUQsRUFBR0gsRUFBSUUsRUFBR0YsRUFBRyxHQUFLLElBR3BFLEVBQUFLLFNBQVAsU0FBZ0JILEVBQVlDLEdBQzFCLE9BQU92RSxLQUFLMEUsS0FBS3pJLEtBQUtvSSxnQkFBZ0JDLEVBQUlDLEtBRXJDLEVBQUFJLE1BQVAsU0FBYUMsRUFBZ0JySixHQU0zQixPQUxBQSxFQUFFc0IsR0FBSytILEVBQ1BySixFQUFFdUIsR0FBSzhILE9BQ0tsQixJQUFSbkksRUFBRTZJLElBQ0o3SSxFQUFFNkksR0FBS1EsR0FFRnJKLEdBbkJGLEVBQUFzSixPQUFTLFNBQUNQLEdBQWUsZ0JBQUNDLEdBQy9CLE9BQWEsTUFBTkQsR0FBb0IsTUFBTkMsR0FBY0QsRUFBR3pILElBQU0wSCxFQUFHMUgsR0FBS3lILEVBQUd4SCxJQUFNeUgsRUFBR3pILEdBQUt3SCxFQUFHRixJQUFNRyxFQUFHSCxJQW9CckYsRUExQkEsR0FBYSxFQUFBVSIsImZpbGUiOiJjYW52YXMtdG9vbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImNhbnZhcy10b29sc1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJjYW52YXMtdG9vbHNcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiY2FudmFzLXRvb2xzXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgQ2FudmFzQW5pbWF0b3Ige1xuICBwcm90ZWN0ZWQgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIHByb3RlY3RlZCBhbmltYXRpb25GcmFtZUlkPzogbnVtYmVyO1xuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgcHVibGljIGZwcyA9IDMwKSB7XG4gICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnNldHVwKCk7XG4gICAgfSwgMCk7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZSgwKSk7XG4gIH1cbiAgcHVibGljIGFic3RyYWN0IGRyYXcoc3RhdGU/OiBhbnksIGN0eD86IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQ7XG4gIHB1YmxpYyBhYnN0cmFjdCBzZXR1cCgpOiB2b2lkO1xuICBwcm90ZWN0ZWQgdXBkYXRlID0gKHQxOiBET01IaWdoUmVzVGltZVN0YW1wKSA9PiAodDI6IERPTUhpZ2hSZXNUaW1lU3RhbXApID0+IHtcbiAgICBpZiAodDIgLSB0MSA+IDEwMDAgLyB0aGlzLmZwcykge1xuICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICB0aGlzLmFuaW1hdGlvbkZyYW1lSWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlKHQyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUodDEpKTtcbiAgICB9XG4gIH07XG4gIHB1YmxpYyBjbGVhcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9IHRoaXMuY3R4KTogdm9pZCB7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgfVxuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hbmltYXRpb25GcmFtZUlkKSB7XG4gICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25GcmFtZUlkKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IElSZWN0IH0gZnJvbSAnLi9yZWN0JztcblxuZXhwb3J0IGludGVyZmFjZSBJUm91bmRlZFJlY3RSYWRpdXMge1xuICB0bDogbnVtYmVyO1xuICB0cjogbnVtYmVyO1xuICBicjogbnVtYmVyO1xuICBibDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElSb3VuZGVkUmVjdCBleHRlbmRzIElSZWN0IHtcbiAgcmFkaXVzOiBudW1iZXIgfCBJUm91bmRlZFJlY3RSYWRpdXM7XG4gIGZpbGxTdHlsZT86IHN0cmluZztcbiAgc3Ryb2tlU3R5bGU/OiBzdHJpbmc7XG59XG5leHBvcnQgY2xhc3MgUm91bmRlZFJlY3Qge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbiAgc3RhdGljIGRyYXcoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMsIGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUgfTogSVJvdW5kZWRSZWN0XG4gICkge1xuICAgIGlmICh0eXBlb2YgcmFkaXVzID09PSAnbnVtYmVyJykge1xuICAgICAgcmFkaXVzID0ge1xuICAgICAgICB0bDogcmFkaXVzLFxuICAgICAgICB0cjogcmFkaXVzLFxuICAgICAgICBicjogcmFkaXVzLFxuICAgICAgICBibDogcmFkaXVzXG4gICAgICB9O1xuICAgIH1cblxuICAgIGN0eC5zYXZlKCk7XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbyh4ICsgcmFkaXVzLnRsLCB5KTtcbiAgICBjdHgubGluZVRvKHggKyB3aWR0aCAtIHJhZGl1cy50ciwgeSk7XG4gICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoLCB5LCB4ICsgd2lkdGgsIHkgKyByYWRpdXMudHIpO1xuICAgIGN0eC5saW5lVG8oeCArIHdpZHRoLCB5ICsgaGVpZ2h0IC0gcmFkaXVzLmJyKTtcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQsIHggKyB3aWR0aCAtIHJhZGl1cy5iciwgeSArIGhlaWdodCk7XG4gICAgY3R4LmxpbmVUbyh4ICsgcmFkaXVzLmJsLCB5ICsgaGVpZ2h0KTtcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4LCB5ICsgaGVpZ2h0LCB4LCB5ICsgaGVpZ2h0IC0gcmFkaXVzLmJsKTtcbiAgICBjdHgubGluZVRvKHgsIHkgKyByYWRpdXMudGwpO1xuICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyByYWRpdXMudGwsIHkpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcblxuICAgIGlmIChmaWxsU3R5bGUpIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgICBjdHguZmlsbCgpO1xuICAgIH1cbiAgICBpZiAoc3Ryb2tlU3R5bGUpIHtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xuICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgSVRleHRCb3gge1xuICB0ZXh0OiBzdHJpbmc7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICBtYXhXaWR0aD86IG51bWJlcjtcbiAgZm9udDogc3RyaW5nIHwgbnVtYmVyO1xuICBmaWxsU3R5bGU/OiBzdHJpbmc7XG4gIHN0cm9rZVN0eWxlPzogc3RyaW5nO1xuICB0ZXh0QWxpZ24/OiBDYW52YXNUZXh0QWxpZ247XG4gIHRleHRCYXNlbGluZT86IENhbnZhc1RleHRCYXNlbGluZTtcbn1cbmV4cG9ydCBjbGFzcyBUZXh0IHtcbiAgc3RhdGljIEZPTlRfRkFNSUxZID1cbiAgICAnTW9udHNlcnJhdCwgLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCBcIlNlZ29lIFVJXCIsIFJvYm90bywgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBBcmlhbCwgc2Fucy1zZXJpZiwgXCJBcHBsZSBDb2xvciBFbW9qaVwiLCBcIlNlZ29lIFVJIEVtb2ppXCIsIFwiU2Vnb2UgVUkgU3ltYm9sXCInO1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbiAgc3RhdGljIGRyYXcgPSAoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAge1xuICAgICAgdGV4dCxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgbWF4V2lkdGgsXG4gICAgICBmb250LFxuICAgICAgZmlsbFN0eWxlLFxuICAgICAgc3Ryb2tlU3R5bGUsXG4gICAgICB0ZXh0QWxpZ24gPSAnY2VudGVyJyxcbiAgICAgIHRleHRCYXNlbGluZSA9ICdtaWRkbGUnXG4gICAgfTogSVRleHRCb3hcbiAgKSA9PiB7XG4gICAgY3R4LnNhdmUoKTtcblxuICAgIGlmICh0eXBlb2YgZm9udCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGZvbnQgPSBUZXh0LmdldEZvbnQoZm9udCk7XG4gICAgfVxuICAgIGN0eC5mb250ID0gZm9udDtcbiAgICBjdHgudGV4dEFsaWduID0gdGV4dEFsaWduO1xuICAgIGN0eC50ZXh0QmFzZWxpbmUgPSB0ZXh0QmFzZWxpbmU7XG5cbiAgICBpZiAoIWZpbGxTdHlsZSAmJiAhc3Ryb2tlU3R5bGUpIHtcbiAgICAgIGZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgfVxuXG4gICAgaWYgKGZpbGxTdHlsZSkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcbiAgICAgIGN0eC5maWxsVGV4dCh0ZXh0LCB4LCB5LCBtYXhXaWR0aCk7XG4gICAgfVxuICAgIGlmIChzdHJva2VTdHlsZSkge1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3R5bGU7XG4gICAgICBjdHguc3Ryb2tlVGV4dCh0ZXh0LCB4LCB5LCBtYXhXaWR0aCk7XG4gICAgfVxuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfTtcbiAgc3RhdGljIGdldEZvbnQgPSAoZm9udFNpemU6IG51bWJlcikgPT4ge1xuICAgIHJldHVybiBmb250U2l6ZSArICdweCAnICsgVGV4dC5GT05UX0ZBTUlMWTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IElQb2ludCB9IGZyb20gJy4vcG9pbnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElSZWN0IHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgUmVjdCB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICBzdGF0aWMgY29udGFpbnMgPSAocG9zOiBJUG9pbnQsIHJlY3Q6IElSZWN0KSA9PlxuICAgIHBvcy54ID4gcmVjdC54ICYmIHBvcy54IDwgcmVjdC54ICsgcmVjdC53aWR0aCAmJiBwb3MueSA8IHJlY3QueSArIHJlY3QuaGVpZ2h0ICYmIHBvcy55ID4gcmVjdC55O1xuXG4gIHN0YXRpYyBpbnRlcnNlY3RzID0gKHJhbmdlOiBJUmVjdCwgcmVjdDI6IElSZWN0KSA9PlxuICAgICEoXG4gICAgICByYW5nZS54ID4gcmVjdDIueCArIHJlY3QyLndpZHRoIHx8XG4gICAgICByYW5nZS54ICsgcmFuZ2Uud2lkdGggPCByZWN0Mi54IHx8XG4gICAgICByYW5nZS55ID4gcmVjdDIueSArIHJhbmdlLmhlaWdodCB8fFxuICAgICAgcmFuZ2UueSArIHJhbmdlLmhlaWdodCA8IHJlY3QyLnlcbiAgICApO1xufVxuIiwiaW1wb3J0ICogYXMgQW5pbWF0b3JzIGZyb20gJy4vYW5pbWF0b3JzL2luZGV4JztcbmltcG9ydCB7IEltYWdlTG9hZGVyIH0gZnJvbSAnLi9saWIvaW1hZ2UtbG9hZGVyJztcbi8vIGltcG9ydCAqIGFzIFNoYXBlcyBmcm9tICcuL3Rvb2xzL2luZGV4JztcblxuZXhwb3J0IHsgQW5pbWF0b3JzLCBJbWFnZUxvYWRlciB9O1xuZXhwb3J0ICogZnJvbSAnLi90b29scy9pbmRleCc7XG4iLCJleHBvcnQgKiBmcm9tICcuL2JhY2tncm91bmQtYW5pbWF0b3InO1xuZXhwb3J0ICogZnJvbSAnLi9jYW52YXMtYW5pbWF0b3InO1xuZXhwb3J0ICogZnJvbSAnLi9jYW52YXMtZ3JpZC1hbmltYXRvcic7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW52YXNFbGVtZW50KFxuICBjb250YWluZXJJZDogc3RyaW5nLFxuICB3aWR0aCA9IDYwMCxcbiAgaGVpZ2h0ID0gNjAwXG4pOiBIVE1MQ2FudmFzRWxlbWVudCB7XG4gIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgY2FudmFzLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6IDEwMCU7JztcblxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJJZCk7XG4gIGlmIChjb250YWluZXI/LmlubmVySFRNTCkge1xuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgfVxuICBjb250YWluZXI/LmFwcGVuZChjYW52YXMpO1xuICByZXR1cm4gY2FudmFzO1xufVxuIiwiaW1wb3J0IHsgQ2FudmFzQW5pbWF0b3IgfSBmcm9tICcuL2NhbnZhcy1hbmltYXRvcic7XG5cbmV4cG9ydCBjbGFzcyBCYWNrZ3JvdW5kQW5pbWF0b3IgZXh0ZW5kcyBDYW52YXNBbmltYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIHB1YmxpYyBmaWxsU3R5bGU6IHN0cmluZyA9ICcjMjMyMzIzJykge1xuICAgIHN1cGVyKGNhbnZhcyk7XG4gIH1cbiAgcHVibGljIHNldHVwKCkge31cbiAgcHVibGljIGRyYXcgPSAoZmlsbFN0eWxlID0gdGhpcy5maWxsU3R5bGUsIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gdGhpcy5jdHgpID0+IHtcbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9O1xuICBwcm90ZWN0ZWQgdXBkYXRlID0gKHQxOiBET01IaWdoUmVzVGltZVN0YW1wKSA9PiAodDI6IERPTUhpZ2hSZXNUaW1lU3RhbXApID0+IHtcbiAgICB0aGlzLmRyYXcoKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IENhbnZhc0FuaW1hdG9yIH0gZnJvbSAnLi9jYW52YXMtYW5pbWF0b3InO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ2FudmFzR3JpZEFuaW1hdG9yIGV4dGVuZHMgQ2FudmFzQW5pbWF0b3Ige1xuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgcHJvdGVjdGVkIGdyaWQ6IHsgY29sczogbnVtYmVyOyByb3dzOiBudW1iZXIgfSkge1xuICAgIHN1cGVyKGNhbnZhcyk7XG4gIH1cbiAgcHJvdGVjdGVkIHgoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgoeCAqIHRoaXMuY2FudmFzLndpZHRoKSAvIHRoaXMuZ3JpZC5jb2xzKTtcbiAgfVxuICBwcm90ZWN0ZWQgeSh5OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKCh5ICogdGhpcy5jYW52YXMuaGVpZ2h0KSAvIHRoaXMuZ3JpZC5yb3dzKTtcbiAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBJSW1hZ2VTZXQge1xuICBba2V5OiBzdHJpbmddOiBIVE1MSW1hZ2VFbGVtZW50O1xufVxuZXhwb3J0IGludGVyZmFjZSBJSW1hZ2VTb3VyY2VTZXQge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59XG5leHBvcnQgY2xhc3MgSW1hZ2VMb2FkZXIge1xuICBwcml2YXRlIGxvYWRlZCA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgdG90YWw6IG51bWJlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBpbWFnZXM6IElJbWFnZVNldCA9IHt9O1xuICBjb25zdHJ1Y3Rvcihzb3VyY2VzOiBJSW1hZ2VTb3VyY2VTZXQsIGNhbGxiYWNrOiAoaW1hZ2VzOiBJSW1hZ2VTZXQpID0+IHZvaWQgPSAoKSA9PiB7fSkge1xuICAgIGxldCB0ID0gMDtcbiAgICBmb3IgKGNvbnN0IHNyYyBpbiBzb3VyY2VzKSB7XG4gICAgICBpZiAoc291cmNlcy5oYXNPd25Qcm9wZXJ0eShzcmMpKSB7XG4gICAgICAgIHQrKztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy50b3RhbCA9IHQ7XG5cbiAgICBmb3IgKGNvbnN0IHNyYyBpbiBzb3VyY2VzKSB7XG4gICAgICBpZiAoc291cmNlcy5oYXNPd25Qcm9wZXJ0eShzcmMpKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VzW3NyY10gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgdGhpcy5pbWFnZXNbc3JjXS5zcmMgPSBzb3VyY2VzW3NyY107XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5vbkxvYWQoY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGljIGhhc0ltYWdlKGltZzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VzW2ltZ10gIT0gbnVsbDtcbiAgfVxuICBwdWJsaWMgb25Mb2FkKGNhbGxiYWNrOiAoaW1hZ2VzOiBJSW1hZ2VTZXQpID0+IHZvaWQpIHtcbiAgICBmb3IgKGNvbnN0IGltZyBpbiB0aGlzLmltYWdlcykge1xuICAgICAgaWYgKHRoaXMuaW1hZ2VzLmhhc093blByb3BlcnR5KGltZykpIHtcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkIDwgdGhpcy50b3RhbCkge1xuICAgICAgICAgIHRoaXMuaW1hZ2VzW2ltZ10uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICdsb2FkJyxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCsrdGhpcy5sb2FkZWQgPj0gdGhpcy50b3RhbCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMuaW1hZ2VzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayh0aGlzLmltYWdlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCAqIGZyb20gJy4vYnV0dG9uJztcbmV4cG9ydCAqIGZyb20gJy4vY2lyY2xlJztcbmV4cG9ydCAqIGZyb20gJy4vaW1hZ2UnO1xuZXhwb3J0ICogZnJvbSAnLi9saW5lJztcbmV4cG9ydCAqIGZyb20gJy4vbW91c2UnO1xuZXhwb3J0ICogZnJvbSAnLi9wb2ludCc7XG5leHBvcnQgKiBmcm9tICcuL3JlY3QnO1xuZXhwb3J0ICogZnJvbSAnLi9yb3VuZGVkLXJlY3QnO1xuZXhwb3J0ICogZnJvbSAnLi90ZXh0JztcbiIsImltcG9ydCB7IElDbGlja0V2ZW50T2JqZWN0LCBJSG92ZXJFdmVudE9iamVjdCB9IGZyb20gJy4vbW91c2UnO1xuaW1wb3J0IHsgSVJvdW5kZWRSZWN0LCBSb3VuZGVkUmVjdCB9IGZyb20gJy4vcm91bmRlZC1yZWN0JztcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuL3RleHQnO1xuZXhwb3J0IGludGVyZmFjZSBJQnV0dG9uIGV4dGVuZHMgSVJvdW5kZWRSZWN0LCBJQ2xpY2tFdmVudE9iamVjdCwgSUhvdmVyRXZlbnRPYmplY3Qge1xuICBib3JkZXJXaWR0aD86IG51bWJlcjtcbiAgaG92ZXJTdHlsZT86IHN0cmluZztcbiAgdGV4dDogc3RyaW5nO1xuICBmb250OiBzdHJpbmcgfCBudW1iZXI7XG4gIHRleHRTdHlsZTogc3RyaW5nIHwgKCgpID0+IHN0cmluZyk7XG59XG5leHBvcnQgY2xhc3MgQnV0dG9uIHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gY3R4IC0gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEXG4gICAqIEBwYXJhbSBidXR0b24gLSBCdXR0b25cbiAgICovXG4gIHN0YXRpYyBkcmF3KFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIHtcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICByYWRpdXMsXG4gICAgICBmaWxsU3R5bGUsXG4gICAgICBzdHJva2VTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDApJyxcbiAgICAgIGJvcmRlcldpZHRoID0gTWF0aC5taW4oNCwgKHdpZHRoIC8gMzYpICogNCksXG4gICAgICBob3ZlclN0eWxlLFxuICAgICAgdGV4dCxcbiAgICAgIGZvbnQsXG4gICAgICB0ZXh0U3R5bGUsXG4gICAgICBzdGF0ZVxuICAgIH06IElCdXR0b25cbiAgKSB7XG4gICAgY3R4LnNhdmUoKTtcblxuICAgIGlmIChzdGF0ZSA9PT0gJ2hvdmVyJyAmJiBob3ZlclN0eWxlKSB7XG4gICAgICBmaWxsU3R5bGUgPSBob3ZlclN0eWxlO1xuICAgIH0gZWxzZSBpZiAoZmlsbFN0eWxlKSB7XG4gICAgICBmaWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgfVxuXG4gICAgY3R4LmxpbmVXaWR0aCA9IGJvcmRlcldpZHRoO1xuXG4gICAgaWYgKHN0YXRlID09PSAnaG92ZXInICYmIGhvdmVyU3R5bGUpIHtcbiAgICAgIHN0cm9rZVN0eWxlID0gaG92ZXJTdHlsZTtcbiAgICB9IGVsc2UgaWYgKHN0cm9rZVN0eWxlKSB7XG4gICAgICBzdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xuICAgIH1cblxuICAgIFJvdW5kZWRSZWN0LmRyYXcoY3R4LCB7XG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgcmFkaXVzLFxuICAgICAgZmlsbFN0eWxlLFxuICAgICAgc3Ryb2tlU3R5bGVcbiAgICB9KTtcblxuICAgIFRleHQuZHJhdyhjdHgsIHtcbiAgICAgIHRleHQsXG4gICAgICB4OiB4ICsgd2lkdGggLyAyLFxuICAgICAgeTogeSArIGhlaWdodCAvIDIsXG4gICAgICBtYXhXaWR0aDogd2lkdGggKiAwLjksXG4gICAgICBmb250LFxuICAgICAgZmlsbFN0eWxlOiB0eXBlb2YgdGV4dFN0eWxlID09PSAnc3RyaW5nJyA/IHRleHRTdHlsZSA6IHRleHRTdHlsZSgpXG4gICAgfSk7XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJUG9pbnQgfSBmcm9tICcuL3BvaW50JztcblxuZXhwb3J0IGludGVyZmFjZSBJQ2lyY2xlIHtcbiAgY2VudGVyOiBJUG9pbnQ7XG4gIHJhZGl1czogbnVtYmVyO1xuICBmaWxsU3R5bGU/OiBzdHJpbmc7XG4gIHN0cm9rZVN0eWxlPzogc3RyaW5nO1xufVxuZXhwb3J0IGNsYXNzIENpcmNsZSB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICBzdGF0aWMgY3JlYXRlKHg6IG51bWJlciwgeTogbnVtYmVyLCByYWRpdXM6IG51bWJlcik6IENpcmNsZSB7XG4gICAgY29uc3QgY2VudGVyID0geyB4LCB5IH07XG4gICAgcmV0dXJuIHsgY2VudGVyLCByYWRpdXMgfTtcbiAgfVxuICAvKipcbiAgICogRHJhd3MgYSBjaXJjbGVcbiAgICogQHBhcmFtIGN0eCAtIHRoZSBjYW52YXMgcmVuZGVyaW5nIGNvbnRleHRcbiAgICogQHBhcmFtIGNpcmNsZSAtIHRoZSBjaXJjbGUgdG8gZHJhd1xuICAgKiBAcGFyYW0gZmlsbFN0eWxlIC0gdGhlIHN0eWxlIHRvIGZpbGwgdGhlIGNpcmNsZVxuICAgKiBAcGFyYW0gc3Ryb2tlU3R5bGUgLSB0aGUgc3R5bGUgdG8gc3Ryb2tlIHRoZSBjaXJjbGVcbiAgICovXG4gIHN0YXRpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB7IGNlbnRlciwgcmFkaXVzLCBmaWxsU3R5bGUsIHN0cm9rZVN0eWxlIH06IElDaXJjbGUpIHtcbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5hcmMoY2VudGVyLngsIGNlbnRlci55LCByYWRpdXMsIDAsIE1hdGguUEkgKiAyKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG5cbiAgICBpZiAoZmlsbFN0eWxlKSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xuICAgICAgY3R4LmZpbGwoKTtcbiAgICB9XG5cbiAgICBpZiAoc3Ryb2tlU3R5bGUpIHtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xuICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IElQb2ludCB9IGZyb20gJy4vcG9pbnQnO1xuZXhwb3J0IGludGVyZmFjZSBJQ29sb3Ige1xuICByOiBudW1iZXI7XG4gIGc6IG51bWJlcjtcbiAgYjogbnVtYmVyO1xuICBhOiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIElQaXhlbCB7XG4gIHBvc2l0aW9uOiBJUG9pbnQ7XG4gIGNvbG9yOiBJQ29sb3I7XG59XG5leHBvcnQgY2xhc3MgSW1hZ2Uge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbiAgc3RhdGljIGdldFBpeGVsKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB4OiBudW1iZXIsIHk6IG51bWJlcik6IElQaXhlbCB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoeCwgeSwgMSwgMSkuZGF0YTtcbiAgICByZXR1cm4ge1xuICAgICAgcG9zaXRpb246IHsgeCwgeSB9LFxuICAgICAgY29sb3I6IHtcbiAgICAgICAgcjogZGF0YVswXSxcbiAgICAgICAgZzogZGF0YVsxXSxcbiAgICAgICAgYjogZGF0YVsyXSxcbiAgICAgICAgYTogZGF0YVszXVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgc3RhdGljIGdldENhbnZhc1BpeGVscyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KTogSVBpeGVsW10ge1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgICBjb25zdCBkYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLmRhdGE7XG5cbiAgICBjb25zdCByZ2JhOiBJUGl4ZWxbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSA0KSB7XG4gICAgICBjb25zdCBwaXhlbCA9IE1hdGguZmxvb3IoaSAvIDQpO1xuICAgICAgY29uc3QgYWxwaGEgPSBkYXRhW2kgKyAzXTtcbiAgICAgIGlmIChhbHBoYSA+IDApIHtcbiAgICAgICAgcmdiYS5wdXNoKHtcbiAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgeDogcGl4ZWwgJSBjYW52YXMud2lkdGgsXG4gICAgICAgICAgICB5OiBNYXRoLmZsb29yKHBpeGVsIC8gY2FudmFzLndpZHRoKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29sb3I6IHtcbiAgICAgICAgICAgIHI6IGRhdGFbaV0sXG4gICAgICAgICAgICBnOiBkYXRhW2kgKyAxXSxcbiAgICAgICAgICAgIGI6IGRhdGFbaSArIDJdLFxuICAgICAgICAgICAgYTogZGF0YVtpICsgM11cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZ2JhO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJUG9pbnQgfSBmcm9tICcuL3BvaW50JztcblxuZXhwb3J0IGludGVyZmFjZSBJTGluZSB7XG4gIHN0YXJ0OiBJUG9pbnQ7XG4gIGVuZDogSVBvaW50O1xufVxuXG5leHBvcnQgY2xhc3MgTGluZSB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICBzdGF0aWMgZHJhdyA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeyBzdGFydCwgZW5kIH06IElMaW5lKSA9PiB7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8oc3RhcnQueCwgc3RhcnQueSk7XG4gICAgY3R4LmxpbmVUbyhlbmQueCwgZW5kLnkpO1xuICAgIGN0eC5zdHJva2UoKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBJUmVjdCwgUmVjdCB9IGZyb20gJy4vcmVjdCc7XG5cbmV4cG9ydCB0eXBlIE1vdXNlRXZlbnRMaXN0ZW5lciA9IChldmVudDogTW91c2VFdmVudCkgPT4gYW55O1xuZXhwb3J0IGludGVyZmFjZSBJQ2xpY2tFdmVudE9iamVjdCBleHRlbmRzIElSZWN0IHtcbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgb25DbGljazogTW91c2VFdmVudExpc3RlbmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBJSG92ZXJFdmVudE9iamVjdCBleHRlbmRzIElSZWN0IHtcbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgc3RhdGU/OiAnaG92ZXInO1xuICBvbk1vdXNlRW50ZXI/OiBNb3VzZUV2ZW50TGlzdGVuZXI7XG4gIG9uTW91c2VMZWF2ZT86IE1vdXNlRXZlbnRMaXN0ZW5lcjtcbn1cbmV4cG9ydCBjbGFzcyBNb3VzZSB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuICBzdGF0aWMgYWRkQ2xpY2tFdmVudExpc3RlbmVyID0gKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIC4uLmJ1dHRvbnM6IElDbGlja0V2ZW50T2JqZWN0W10pID0+IHtcbiAgICBjb25zdCBnZXRNb3VzZVBvcyA9IE1vdXNlLmdldE1vdXNlUG9zKGNhbnZhcyk7XG5cbiAgICBjb25zdCBoYW5kbGVyID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHBvcyA9IGdldE1vdXNlUG9zKGUpO1xuICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIGlmIChidXR0b24uZW5hYmxlZCAmJiBSZWN0LmNvbnRhaW5zKHBvcywgYnV0dG9uKSkge1xuICAgICAgICAgIC8vIGNsaWNrIGV2ZW50XG4gICAgICAgICAgYnV0dG9uLm9uQ2xpY2soZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVyKTtcblxuICAgIHJldHVybiB7IHR5cGU6ICdjbGljaycsIGZ1bmN0aW9uOiBoYW5kbGVyIH0gYXMge1xuICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgZnVuY3Rpb246IE1vdXNlRXZlbnRMaXN0ZW5lcjtcbiAgICB9O1xuICB9O1xuICBzdGF0aWMgYWRkSG92ZXJFdmVudExpc3RlbmVyID0gKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIC4uLmJ1dHRvbnM6IElIb3ZlckV2ZW50T2JqZWN0W10pID0+IHtcbiAgICBjb25zdCBnZXRNb3VzZVBvcyA9IE1vdXNlLmdldE1vdXNlUG9zKGNhbnZhcyk7XG5cbiAgICBjb25zdCBoYW5kbGVyID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHBvcyA9IGdldE1vdXNlUG9zKGUpO1xuICAgICAgbGV0IGludGVyc2VjdCA9IGZhbHNlO1xuICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIGlmIChidXR0b24uZW5hYmxlZCAmJiBSZWN0LmNvbnRhaW5zKHBvcywgYnV0dG9uKSkge1xuICAgICAgICAgIC8vIGhvdmVyIGV2ZW50XG4gICAgICAgICAgaWYgKGJ1dHRvbi5zdGF0ZSAhPT0gJ2hvdmVyJykge1xuICAgICAgICAgICAgYnV0dG9uLnN0YXRlID0gJ2hvdmVyJztcbiAgICAgICAgICAgIGlmIChidXR0b24ub25Nb3VzZUVudGVyKSB7XG4gICAgICAgICAgICAgIGJ1dHRvbi5vbk1vdXNlRW50ZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGludGVyc2VjdCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uLnN0YXRlID09PSAnaG92ZXInKSB7XG4gICAgICAgICAgYnV0dG9uLnN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChidXR0b24ub25Nb3VzZUxlYXZlKSB7XG4gICAgICAgICAgICBidXR0b24ub25Nb3VzZUxlYXZlKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjYW52YXMuc3R5bGUuY3Vyc29yID0gaW50ZXJzZWN0ID8gJ3BvaW50ZXInIDogJ2RlZmF1bHQnO1xuICAgIH07XG5cbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlcik7XG5cbiAgICByZXR1cm4geyB0eXBlOiAnbW91c2Vtb3ZlJywgZnVuY3Rpb246IGhhbmRsZXIgfSBhcyB7XG4gICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICBmdW5jdGlvbjogTW91c2VFdmVudExpc3RlbmVyO1xuICAgIH07XG4gIH07XG4gIHN0YXRpYyBnZXRNb3VzZVBvcyA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSA9PiAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6ICgoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSkgKiBjYW52YXMud2lkdGgsXG4gICAgICB5OiAoKGUuY2xpZW50WSAtIHJlY3QudG9wKSAvIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSkgKiBjYW52YXMuaGVpZ2h0XG4gICAgfTtcbiAgfTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgSVBvaW50IHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIHo/OiBudW1iZXI7XG59XG5leHBvcnQgY2xhc3MgUG9pbnQge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cbiAgc3RhdGljIGNyZWF0ZSh4OiBudW1iZXIsIHk6IG51bWJlciwgej86IG51bWJlcik6IElQb2ludCB7XG4gICAgcmV0dXJuIHsgeCwgeSwgeiB9O1xuICB9XG4gIHN0YXRpYyBlcXVhbHMgPSAocDE6IElQb2ludCkgPT4gKHAyOiBJUG9pbnQpID0+IHtcbiAgICByZXR1cm4gcDEgIT0gbnVsbCAmJiBwMiAhPSBudWxsICYmIHAxLnggPT09IHAyLnggJiYgcDEueSA9PT0gcDIueSAmJiBwMS56ID09PSBwMi56O1xuICB9O1xuICBzdGF0aWMgc3F1YXJlZERpc3RhbmNlKHAxOiBJUG9pbnQsIHAyOiBJUG9pbnQpOiBudW1iZXIge1xuICAgIHJldHVybiAoXG4gICAgICBNYXRoLnBvdyhwMi54IC0gcDEueCwgMikgK1xuICAgICAgTWF0aC5wb3cocDIueSAtIHAxLnksIDIpICtcbiAgICAgIChwMS56ICE9PSB1bmRlZmluZWQgJiYgcDIueiAhPT0gdW5kZWZpbmVkID8gTWF0aC5wb3cocDIueiAtIHAxLnosIDIpIDogMClcbiAgICApO1xuICB9XG4gIHN0YXRpYyBkaXN0YW5jZShwMTogSVBvaW50LCBwMjogSVBvaW50KTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMuc3F1YXJlZERpc3RhbmNlKHAxLCBwMikpO1xuICB9XG4gIHN0YXRpYyBzY2FsZShmYWN0b3I6IG51bWJlciwgcDogSVBvaW50KTogSVBvaW50IHtcbiAgICBwLnggKj0gZmFjdG9yO1xuICAgIHAueSAqPSBmYWN0b3I7XG4gICAgaWYgKHAueiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBwLnogKj0gZmFjdG9yO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==